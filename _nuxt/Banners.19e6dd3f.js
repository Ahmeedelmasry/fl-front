import{_ as H}from"./_plugin-vue_export-helper.c27b6911.js";import{o as _,c as P,a as w,D as J,E as N,G as y,H as T,k as v,z as Y,l as I,r as d,b as e,w as t,d as x,t as O,q as K,j as a,n as Q,h as k,F as j,i as G,g as C,s as W}from"./entry.08c37509.js";import{r as M,m as q,u as z}from"./index.4590c98c.js";import{_ as X}from"./DeletePopup.f158edf7.js";import{V as Z}from"./VSkeletonLoader.3b088029.js";const ee={},te=w("h3",{style:{"line-height":"15","text-align":"center","font-size":"20px",color:"rgb(136, 136, 136)"}}," No Data Added Yet ",-1),ae=[te];function ne(l,r){return _(),P("div",null,ae)}const oe=H(ee,[["render",ne]]),E=J("dashboardBannersStore",{state:()=>({dashboardBanners:[]}),actions:{async doGetDashboardBanners(){this.dashboardBanners=[],await N.get(`${y().apiURL}/FutureLab/banner?lang=${T().lang[0]}`).then(l=>{this.dashboardBanners=l.data})},async doAddDashboardBanners(l){let r;return await N({data:l,method:"POST",url:`${y().apiURL}/FutureLab/banner?lang=${T().lang[0]}`,headers:{"Content-Type":"multipart/form-data"}}).then(o=>{r=!0,this.dashboardBanners=o.data,y().callResponse(!0,o.data.message,1)}).catch(o=>{r=!1,y().callResponse(!0,o.response.data.message,2)}),r},async doUpdateDashboardBanners(l){let r;return await N({data:l,method:"PATCH",url:`${y().apiURL}/FutureLab/banner?lang=${T().lang[0]}`,headers:{"Content-Type":"multipart/form-data"}}).then(o=>{r=!0,this.dashboardBanners=o.data,y().callResponse(!0,o.data.message,1)}).catch(o=>{y().callResponse(!0,o.response.data.message,2),r=!1}),r}}}),se={class:"update_banner"},le={class:"actions text-center"},re={__name:"UpdateBanner",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(l,{emit:r}){const o=l,m=E(),s=v({title:"",image:[]}),c=v(!1),f=v(!1),g=v({title:{required:M,minLength:q(3)},image:{required:M,minLength:q(1)}}),A=v(null);Y(()=>c.value,U=>{U||setTimeout(()=>{r("closePopup")},200)});let h=z(g,s);const u=async()=>{if(o.toUpdate&&(g.value.image={},h=z(g,s)),await h.value.$validate()){if(f.value=!0,o.toUpdate){const n=new FormData;if(n.append("stringDto",JSON.stringify({id:o.toUpdate.id,title:s.value.title,isActive:!0})),s.value.image&&s.value.image.length)n.append("photo",s.value.image[0]);else{const B=atob(A.value),$=new ArrayBuffer(B.length),V=new Uint8Array($);for(let b=0;b<B.length;b++)V[b]=B.charCodeAt(b);const L=new Blob([$],{type:"application/octet-stream"}),S=new File([L],"filename.ext",{type:"application/octet-stream"});n.append("photo",S)}await m.doUpdateDashboardBanners(n)&&(r("regetData"),c.value=!1)}else{const n=new FormData;n.append("stringDto",JSON.stringify({title:s.value.title,isActive:!0})),n.append("photo",s.value.image[0]),await m.doAddDashboardBanners(n)&&(r("regetData"),c.value=!1)}f.value=!1}};return I(()=>{c.value=o.openPopup,o.toUpdate&&(s.value.title=o.toUpdate.title,A.value=o.toUpdate.photo)}),(U,n)=>{const D=d("v-card-title"),B=d("v-text-field"),$=d("v-col"),V=d("v-file-input"),L=d("v-row"),S=d("v-container"),b=d("v-btn"),R=d("v-form"),i=d("v-card"),F=d("v-dialog");return _(),P("div",se,[e(F,{modelValue:a(c),"onUpdate:modelValue":n[3]||(n[3]=p=>Q(c)?c.value=p:null),width:"700",persistent:""},{default:t(()=>[e(i,null,{default:t(()=>[e(D,{class:"mb-5 text-center bg-grey-lighten-3"},{default:t(()=>[x(O(l.toUpdate?"Update Banner":"Add Banner"),1)]),_:1}),e(R,{class:"pa-5",onSubmit:K(u,["prevent"])},{default:t(()=>[e(S,null,{default:t(()=>[e(L,null,{default:t(()=>[e($,{cols:"12"},{default:t(()=>[e(B,{label:"Banner Title",variant:"outlined",modelValue:a(s).title,"onUpdate:modelValue":n[0]||(n[0]=p=>a(s).title=p),disabled:a(f),"error-messages":a(h).$errors.find(p=>p.$property=="title")?a(h).$errors.find(p=>p.$property=="title").$message:""},null,8,["modelValue","disabled","error-messages"])]),_:1}),e($,{cols:"12"},{default:t(()=>[e(V,{modelValue:a(s).image,"onUpdate:modelValue":n[1]||(n[1]=p=>a(s).image=p),variant:"outlined",label:"Upload Image",accept:".jpg, .jpeg, png",disabled:a(f),"error-messages":a(h).$errors.find(p=>p.$property=="image")?a(h).$errors.find(p=>p.$property=="image").$message:""},null,8,["modelValue","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),w("div",le,[e(b,{color:"red",class:"mr-3",onClick:n[2]||(n[2]=p=>c.value=!1),disabled:a(f)},{default:t(()=>[x("Cancel")]),_:1},8,["disabled"]),e(b,{color:"green",type:"submit",loading:a(f)},{default:t(()=>[x("Save")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},de=re,ie={class:"dashboard_banners_listing"},ce={class:"heading d-flex justify-space-between align-center"},ue=w("h2",{class:"my-3"},"Banners",-1),pe={class:"img_dad"},_e=["src"],me={class:"price text-start pa-5"},fe={class:"price text-start pa-5"},ve={__name:"Listing",props:["dashboardBanners","loading"],emits:["regetData"],setup(l,{emit:r}){const o=y(),m=v(!1),s=v(!1),c=v(!1),f=v(null),g=v(null),A=async()=>{c.value=!1,g.value.loading=!0,await o.doDeleteItem("banner",g.value.id)&&r("regetData"),g.value.loading=!1};return(h,u)=>{const U=d("v-btn"),n=d("v-col"),D=d("v-row"),B=d("v-icon"),$=d("v-tooltip"),V=d("v-card"),L=oe,S=d("v-container"),b=de,R=X;return _(),P("div",ie,[e(S,{fluid:""},{default:t(()=>[e(D,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[w("div",ce,[ue,e(U,{onClick:u[0]||(u[0]=i=>m.value=!0),width:"150px",height:"45px",color:"blue"},{default:t(()=>[x("Add Banner")]),_:1})])]),_:1})]),_:1}),l.dashboardBanners&&!l.loading?(_(),k(D,{key:0,class:"section_container dashboard_table"},{default:t(()=>[(_(!0),P(j,null,G(l.dashboardBanners.content,i=>(_(),k(n,{cols:"12",sm:"6",md:"4",lg:"3",key:i.id},{default:t(()=>[e(V,{class:"w-100 position-relative team-card",rounded:"lg"},{default:t(()=>[w("div",pe,[w("img",{src:`data:image/jpg;base64,${i.photo}`,alt:"",style:{width:"100%",height:"150px"}},null,8,_e)]),w("div",me,O(i.title),1),w("div",fe,[e(U,{elevation:"0"},{default:t(()=>[e(B,{color:"blue",style:{cursor:"pointer"},onClick:F=>(f.value=i,s.value=!0)},{default:t(()=>[x("mdi-square-edit-outline ")]),_:2},1032,["onClick"]),e($,{activator:"parent",location:"bottom center"},{default:t(()=>[x("Update")]),_:1})]),_:2},1024),e(U,{elevation:"0",color:"transparent",loading:i.loading,ripple:!1},{default:t(()=>[e(B,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:F=>(g.value=i,c.value=!0)},{default:t(()=>[x("mdi-delete")]),_:2},1032,["onClick"]),e($,{activator:"parent",location:"bottom center"},{default:t(()=>[x("Delete")]),_:1})]),_:2},1032,["loading"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):C("",!0),l.loading?(_(),k(D,{key:1,class:"section_container"},{default:t(()=>[(_(),P(j,null,G(8,i=>e(n,{cols:"12",sm:"6",md:"4",lg:"3",key:i},{default:t(()=>[e(a(Z),{type:"image, image"})]),_:2},1024)),64))]),_:1})):C("",!0),!l.loading&&l.dashboardBanners&&l.dashboardBanners.content&&!l.dashboardBanners.content.length?(_(),k(D,{key:2},{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(L)]),_:1})]),_:1})):C("",!0)]),_:1}),a(s)?(_(),k(b,{key:0,openPopup:a(s),onClosePopup:u[1]||(u[1]=i=>(s.value=!1,f.value=null)),toUpdate:a(f),onRegetData:u[2]||(u[2]=i=>r("regetData"))},null,8,["openPopup","toUpdate"])):C("",!0),a(m)?(_(),k(b,{key:1,openPopup:a(m),onClosePopup:u[3]||(u[3]=i=>m.value=!1),onRegetData:u[4]||(u[4]=i=>r("regetData"))},null,8,["openPopup"])):C("",!0),a(c)?(_(),k(R,{key:2,openPopup:a(c),onClosePopup:u[5]||(u[5]=i=>c.value=!1),onConfirmDelete:A},null,8,["openPopup"])):C("",!0)])}}},ge=ve,be={class:"dashboard_banners_page"},we={__name:"Banners",setup(l){const r=E(),{dashboardBanners:o}=W(r),m=v(!0),s=async()=>{m.value=!0,await r.doGetDashboardBanners(),m.value=!1};return I(()=>{s()}),(c,f)=>{const g=ge;return _(),P("div",be,[e(g,{dashboardBanners:a(o),loading:a(m),onRegetData:s},null,8,["dashboardBanners","loading"])])}}};export{we as default};
