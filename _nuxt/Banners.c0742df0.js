import{_ as H}from"./_plugin-vue_export-helper.c27b6911.js";import{o as _,c as P,a as y,D as J,E as F,G as $,H as N,k as f,z as Y,l as z,r as i,b as e,w as t,d as V,t as I,q as K,j as a,n as Q,h as x,F as T,i as j,g as C,s as W}from"./entry.8c88b42c.js";import{r as G,m as M,u as q}from"./index.a1c7dcf5.js";import{_ as X}from"./DeletePopup.ea62822f.js";import{V as Z}from"./VSkeletonLoader.4817fd85.js";const ee={},te=y("h3",{style:{"line-height":"15","text-align":"center","font-size":"20px",color:"rgb(136, 136, 136)"}}," No Data Added Yet ",-1),ae=[te];function ne(l,r){return _(),P("div",null,ae)}const oe=H(ee,[["render",ne]]),O=J("dashboardBannersStore",{state:()=>({dashboardBanners:[]}),actions:{async doGetDashboardBanners(){this.dashboardBanners=[],await F.get(`${$().apiURL}/FutureLab/banner?lang=${N().lang[0]}`).then(l=>{this.dashboardBanners=l.data})},async doAddDashboardBanners(l){let r;return await F({data:l,method:"POST",url:`${$().apiURL}/FutureLab/banner?lang=${N().lang[0]}`,headers:{"Content-Type":"multipart/form-data"}}).then(o=>{r=!0,this.dashboardBanners=o.data,$().callResponse(!0,o.data.message,1)}).catch(o=>{r=!1,$().callResponse(!0,o.response.data.message,2)}),r},async doUpdateDashboardBanners(l){let r;return await F({data:l,method:"PATCH",url:`${$().apiURL}/FutureLab/banner?lang=${N().lang[0]}`,headers:{"Content-Type":"multipart/form-data"}}).then(o=>{r=!0,this.dashboardBanners=o.data,$().callResponse(!0,o.data.message,1)}).catch(o=>{$().callResponse(!0,o.response.data.message,2),r=!1}),r}}}),se={class:"update_banner"},le={class:"actions text-center"},re={__name:"UpdateBanner",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(l,{emit:r}){const o=l,m=O(),s=f({title:"",image:[]}),u=f(!1),g=f(!1),v=f({title:{required:G,minLength:M(3)},image:{required:G,minLength:M(1)}}),A=f(null);Y(()=>u.value,U=>{U||setTimeout(()=>{r("closePopup")},200)});let h=q(v,s);const c=async()=>{if(o.toUpdate&&(v.value.image={},h=q(v,s)),await h.value.$validate()){if(g.value=!0,o.toUpdate){const n=new FormData;if(n.append("stringDto",JSON.stringify({id:o.toUpdate.id,title:s.value.title,isActive:!0})),s.value.image&&s.value.image.length)n.append("photo",s.value.image[0]);else{const B=atob(A.value),w=new ArrayBuffer(B.length),L=new Uint8Array(w);for(let b=0;b<B.length;b++)L[b]=B.charCodeAt(b);const S=new Blob([w],{type:"application/octet-stream"}),k=new File([S],"filename.ext",{type:"application/octet-stream"});n.append("photo",k)}await m.doUpdateDashboardBanners(n)&&(r("regetData"),u.value=!1)}else{const n=new FormData;n.append("stringDto",JSON.stringify({title:s.value.title,isActive:!0})),n.append("photo",s.value.image[0]),await m.doAddDashboardBanners(n)&&(r("regetData"),u.value=!1)}g.value=!1}};return z(()=>{u.value=o.openPopup,o.toUpdate&&(s.value.title=o.toUpdate.title,A.value=o.toUpdate.photo)}),(U,n)=>{const D=i("v-card-title"),B=i("v-text-field"),w=i("v-col"),L=i("v-file-input"),S=i("v-row"),k=i("v-container"),b=i("v-btn"),d=i("v-form"),R=i("v-card"),E=i("v-dialog");return _(),P("div",se,[e(E,{modelValue:a(u),"onUpdate:modelValue":n[3]||(n[3]=p=>Q(u)?u.value=p:null),width:"700",persistent:""},{default:t(()=>[e(R,null,{default:t(()=>[e(D,{class:"mb-5 text-center bg-grey-lighten-3"},{default:t(()=>[V(I(l.toUpdate?"Update Banner":"Add Banner"),1)]),_:1}),e(d,{class:"pa-5",onSubmit:K(c,["prevent"])},{default:t(()=>[e(k,null,{default:t(()=>[e(S,null,{default:t(()=>[e(w,{cols:"12"},{default:t(()=>[e(B,{label:"Banner Title",variant:"outlined",modelValue:a(s).title,"onUpdate:modelValue":n[0]||(n[0]=p=>a(s).title=p),disabled:a(g),"error-messages":a(h).$errors.find(p=>p.$property=="title")?a(h).$errors.find(p=>p.$property=="title").$message:""},null,8,["modelValue","disabled","error-messages"])]),_:1}),e(w,{cols:"12"},{default:t(()=>[e(L,{modelValue:a(s).image,"onUpdate:modelValue":n[1]||(n[1]=p=>a(s).image=p),variant:"outlined",label:"Upload Image",accept:".jpg, .jpeg, png",disabled:a(g),"error-messages":a(h).$errors.find(p=>p.$property=="image")?a(h).$errors.find(p=>p.$property=="image").$message:""},null,8,["modelValue","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),y("div",le,[e(b,{color:"red",class:"mr-3",onClick:n[2]||(n[2]=p=>u.value=!1),disabled:a(g)},{default:t(()=>[V("Cancel")]),_:1},8,["disabled"]),e(b,{color:"green",type:"submit",loading:a(g)},{default:t(()=>[V("Save")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},de=re,ie={class:"dashboard_banners_listing"},ue={class:"heading d-flex justify-space-between align-center"},ce=y("h2",{class:"my-3"},"Banners",-1),pe={class:"img_dad"},_e=["src"],me={class:"price text-start pa-5"},ge={class:"price text-start pa-5"},fe={__name:"Listing",props:["dashboardBanners","loading"],emits:["regetData"],setup(l,{emit:r}){const o=$(),m=f(!1),s=f(!1),u=f(!1),g=f(null),v=f(null),A=async()=>{u.value=!1,v.value.loading=!0,await o.doDeleteItem("banner",v.value.id)&&r("regetData"),v.value.loading=!1};return(h,c)=>{const U=i("v-btn"),n=i("v-col"),D=i("v-row"),B=i("v-icon"),w=i("v-card"),L=oe,S=i("v-container"),k=de,b=X;return _(),P("div",ie,[e(S,{fluid:""},{default:t(()=>[e(D,null,{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[y("div",ue,[ce,e(U,{onClick:c[0]||(c[0]=d=>m.value=!0),width:"150px",height:"45px",color:"blue"},{default:t(()=>[V("Add Banner")]),_:1})])]),_:1})]),_:1}),l.dashboardBanners&&!l.loading?(_(),x(D,{key:0,class:"section_container dashboard_table"},{default:t(()=>[(_(!0),P(T,null,j(l.dashboardBanners.content,d=>(_(),x(n,{cols:"12",sm:"6",md:"4",lg:"3",key:d.id},{default:t(()=>[e(w,{class:"w-100 position-relative team-card",rounded:"lg"},{default:t(()=>[y("div",pe,[y("img",{src:`data:image/jpg;base64,${d.photo}`,alt:"",style:{width:"100%",height:"150px"}},null,8,_e)]),y("div",me,I(d.title),1),y("div",ge,[e(B,{color:"blue",style:{cursor:"pointer"},onClick:R=>(g.value=d,s.value=!0)},{default:t(()=>[V("mdi-square-edit-outline")]),_:2},1032,["onClick"]),e(U,{elevation:"0",color:"transparent",loading:d.loading,ripple:!1},{default:t(()=>[e(B,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:R=>(v.value=d,u.value=!0)},{default:t(()=>[V("mdi-delete")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):C("",!0),l.loading?(_(),x(D,{key:1,class:"section_container"},{default:t(()=>[(_(),P(T,null,j(8,d=>e(n,{cols:"12",sm:"6",md:"4",lg:"3",key:d},{default:t(()=>[e(a(Z),{type:"image, image"})]),_:2},1024)),64))]),_:1})):C("",!0),!l.loading&&l.dashboardBanners&&l.dashboardBanners.content&&!l.dashboardBanners.content.length?(_(),x(D,{key:2},{default:t(()=>[e(n,{cols:"12"},{default:t(()=>[e(L)]),_:1})]),_:1})):C("",!0)]),_:1}),a(s)?(_(),x(k,{key:0,openPopup:a(s),onClosePopup:c[1]||(c[1]=d=>(s.value=!1,g.value=null)),toUpdate:a(g),onRegetData:c[2]||(c[2]=d=>r("regetData"))},null,8,["openPopup","toUpdate"])):C("",!0),a(m)?(_(),x(k,{key:1,openPopup:a(m),onClosePopup:c[3]||(c[3]=d=>m.value=!1),onRegetData:c[4]||(c[4]=d=>r("regetData"))},null,8,["openPopup"])):C("",!0),a(u)?(_(),x(b,{key:2,openPopup:a(u),onClosePopup:c[5]||(c[5]=d=>u.value=!1),onConfirmDelete:A},null,8,["openPopup"])):C("",!0)])}}},ve=fe,be={class:"dashboard_banners_page"},we={__name:"Banners",setup(l){const r=O(),{dashboardBanners:o}=W(r),m=f(!0),s=async()=>{m.value=!0,await r.doGetDashboardBanners(),m.value=!1};return z(()=>{s()}),(u,g)=>{const v=ve;return _(),P("div",be,[e(v,{dashboardBanners:a(o),loading:a(m),onRegetData:s},null,8,["dashboardBanners","loading"])])}}};export{we as default};
