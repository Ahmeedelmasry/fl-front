import{_ as z}from"./DeletePopup.ea62822f.js";import{k as b,z as J,l as I,r,o as N,c as T,b as l,w as o,d as h,t as L,q as O,j as e,a as d,n as H,G as K,h as k,g as B,s as Q}from"./entry.8c88b42c.js";import{d as Y}from"./blogs.931254b6.js";import{r as C,m as x,u as S}from"./index.a1c7dcf5.js";import{V as W}from"./VDataTable.7c3107fa.js";const X={class:"update_banner"},Z=d("div",null,[h("Set as "),d("strong",null,"Common")],-1),ee=d("div",null,[d("strong",{class:"text-success"},"Yes")],-1),te=d("div",null,[d("strong",{class:"text-red"},"No")],-1),oe=d("div",null,[h("Set as "),d("strong",null,"Latest")],-1),le=d("div",null,[d("strong",{class:"text-success"},"Yes")],-1),ae=d("div",null,[d("strong",{class:"text-red"},"No")],-1),se={class:"actions text-center"},ne={__name:"UpdatePackage",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(A,{emit:f}){const c=A,v=Y(),t=b({titleAR:"",titleEN:"",subjectEN:"",isCommon:!1,isLatest:!1,subjectAR:"",image:[]}),_=b(!1),i=b(!1),u=b(null),w=b(null),U=b({titleEN:{required:C,minLength:x(3)},titleAR:{required:C,minLength:x(3)},subjectEN:{required:C,minLength:x(10)},subjectAR:{required:C,minLength:x(10)},image:{required:C,minLength:x(1)}});J(()=>_.value,m=>{m||setTimeout(()=>{f("closePopup")},200)});let p=S(U,t);const R=async()=>{if(c.toUpdate&&(U.value.image={},p=S(U,t)),await p.value.$validate()){if(i.value=!0,c.toUpdate){const s=new FormData;if(s.append("stringDto",JSON.stringify({id:c.toUpdate.selectable.id,titleAR:t.value.titleAR,titleEN:t.value.titleEN.toUpperCase(),subjectAR:t.value.subjectAR,isLatest:t.value.isLatest,isCommon:t.value.isCommon,subjectEN:t.value.subjectEN})),t.value.image&&t.value.image.length)s.append("photo",t.value.image[0]);else{const y=atob(w.value),g=new ArrayBuffer(y.length),D=new Uint8Array(g);for(let $=0;$<y.length;$++)D[$]=y.charCodeAt($);const V=new Blob([g],{type:"application/octet-stream"}),E=new File([V],"filename.ext",{type:"application/octet-stream"});s.append("photo",E)}await v.doUpdateDashboardBlogs(s)&&(f("regetData"),_.value=!1)}else{const s=new FormData;s.append("stringDto",JSON.stringify({titleAR:t.value.titleAR,titleEN:t.value.titleEN.toUpperCase(),subjectAR:t.value.subjectAR,subjectEN:t.value.subjectEN,isLatest:t.value.isLatest,isCommon:t.value.isCommon})),s.append("photo",t.value.image[0]),await v.doAddDashboardBlogs(s)&&(f("regetData"),_.value=!1)}i.value=!1}};return I(()=>{_.value=c.openPopup,c.toUpdate&&(t.value.titleEN=c.toUpdate.selectable.titleEN,t.value.titleAR=c.toUpdate.selectable.titleAR,t.value.subjectAR=c.toUpdate.selectable.subjectAR,t.value.subjectEN=c.toUpdate.selectable.subjectEN,t.value.isCommon=c.toUpdate.selectable.common,t.value.isLatest=c.toUpdate.selectable.latest,w.value=c.toUpdate.selectable.photo),p=S(U,t)}),(m,s)=>{const j=r("v-card-title"),y=r("v-text-field"),g=r("v-col"),D=r("v-radio"),V=r("v-radio-group"),E=r("v-file-input"),$=r("v-textarea"),n=r("v-row"),P=r("v-container"),M=r("v-btn"),q=r("v-form"),F=r("v-card"),G=r("v-dialog");return N(),T("div",X,[l(G,{modelValue:e(_),"onUpdate:modelValue":s[8]||(s[8]=a=>H(_)?_.value=a:null),persistent:"",fullscreen:""},{default:o(()=>[l(F,null,{default:o(()=>[l(j,{class:"mb-5 text-center bg-grey-lighten-3"},{default:o(()=>[h(L(A.toUpdate?"Update Blog":"Add Blog"),1)]),_:1}),l(q,{class:"pa-5",onSubmit:O(R,["prevent"])},{default:o(()=>[l(P,null,{default:o(()=>[l(n,null,{default:o(()=>[l(g,{cols:"12",sm:"6"},{default:o(()=>[l(y,{label:"English Title",variant:"outlined",disabled:e(i)||e(u),modelValue:e(t).titleEN,"onUpdate:modelValue":s[0]||(s[0]=a=>e(t).titleEN=a),"error-messages":e(p).$errors.find(a=>a.$property=="titleEN")?e(p).$errors.find(a=>a.$property=="titleEN").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),l(g,{cols:"12",sm:"6"},{default:o(()=>[l(y,{label:"Arabic Title",disabled:e(i)||e(u),variant:"outlined",modelValue:e(t).titleAR,"onUpdate:modelValue":s[1]||(s[1]=a=>e(t).titleAR=a),"error-messages":e(p).$errors.find(a=>a.$property=="titleAR")?e(p).$errors.find(a=>a.$property=="titleAR").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),l(g,{cols:"12",sm:"3"},{default:o(()=>[l(V,{modelValue:e(t).isCommon,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).isCommon=a)},{label:o(()=>[Z]),default:o(()=>[l(D,{value:!0,disabled:e(u)||e(i)},{label:o(()=>[ee]),_:1},8,["disabled"]),l(D,{value:!1,disabled:e(u)||e(i)},{label:o(()=>[te]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),l(g,{cols:"12",sm:"3"},{default:o(()=>[l(V,{modelValue:e(t).isLatest,"onUpdate:modelValue":s[3]||(s[3]=a=>e(t).isLatest=a)},{label:o(()=>[oe]),default:o(()=>[l(D,{value:!0,disabled:e(u)||e(i)},{label:o(()=>[le]),_:1},8,["disabled"]),l(D,{value:!1,disabled:e(u)||e(i)},{label:o(()=>[ae]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),l(g,{cols:"12",sm:"6"},{default:o(()=>[l(E,{modelValue:e(t).image,"onUpdate:modelValue":s[4]||(s[4]=a=>e(t).image=a),variant:"outlined",label:"Test Image",disabled:e(u)||e(i),accept:".jpg, .jpeg, png","error-messages":e(p).$errors.find(a=>a.$property=="image")?e(p).$errors.find(a=>a.$property=="image").$message:""},null,8,["modelValue","disabled","error-messages"])]),_:1}),l(g,{cols:"12"},{default:o(()=>[l($,{label:"English Subject",disabled:e(i)||e(u),variant:"outlined",modelValue:e(t).subjectEN,"onUpdate:modelValue":s[5]||(s[5]=a=>e(t).subjectEN=a),"error-messages":e(p).$errors.find(a=>a.$property=="subjectEN")?e(p).$errors.find(a=>a.$property=="subjectEN").$message:"",rows:"15"},null,8,["disabled","modelValue","error-messages"])]),_:1}),l(g,{cols:"12"},{default:o(()=>[l($,{label:"Arabic Subject",variant:"outlined",disabled:e(i)||e(u),modelValue:e(t).subjectAR,"onUpdate:modelValue":s[6]||(s[6]=a=>e(t).subjectAR=a),"error-messages":e(p).$errors.find(a=>a.$property=="subjectAR")?e(p).$errors.find(a=>a.$property=="subjectAR").$message:"",rows:"15"},null,8,["disabled","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),d("div",se,[l(M,{color:"red",class:"mr-3",onClick:s[7]||(s[7]=a=>_.value=!1),disabled:e(i)||e(u)},{default:o(()=>[h("Cancel")]),_:1},8,["disabled"]),l(M,{color:"green",type:"submit",loading:e(i)},{default:o(()=>[h("Save")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},ie=ne,re={class:"dashboard_banners_listing"},de={class:"heading d-flex justify-space-between align-center"},ue=d("h2",{class:"my-3"},"Blogs",-1),ce={class:"py-3"},pe=["src"],me={__name:"Listing",props:["dashboardBlogs","loading"],emits:["regetData"],setup(A,{emit:f}){const c=K(),v=b(!1),t=b(!1),_=b(null),i=b(!1),u=b(null),w=b([{title:"English Title",key:"titleEN"},{title:"Arabic Title",key:"titleAR"},{title:"Photo",key:"photo"},{title:"Latest",key:"latest"},{title:"Common",key:"common"},{title:"Post Date",key:"creationDate"},{title:"Actions",key:"actions"}]),U=async()=>{i.value=!1,u.value.loading=!0,await c.doDeleteItem("blog",u.value.id)&&f("regetData"),u.value.loading=!1},p=R=>R?"green":"red";return(R,m)=>{const s=r("v-btn"),j=r("v-col"),y=r("v-row"),g=r("v-icon"),D=r("v-chip"),V=z,E=r("v-container"),$=ie;return N(),T("div",re,[l(E,{fluid:""},{default:o(()=>[l(y,null,{default:o(()=>[l(j,{cols:"12"},{default:o(()=>[d("div",de,[ue,l(s,{onClick:m[0]||(m[0]=n=>v.value=!0),width:"150px",height:"45px",color:"blue"},{default:o(()=>[h("Add Blog")]),_:1})])]),_:1})]),_:1}),A.dashboardBlogs?(N(),k(y,{key:0,class:"px-4"},{default:o(()=>[l(j,{cols:"12",class:"section_container dashboard_table"},{default:o(()=>[l(e(W),{headers:e(w),items:A.dashboardBlogs.content,loading:A.loading,"fixed-header":!0,"fixed-footer":!0},{"item.actions":o(({item:n})=>[l(g,{color:"blue",style:{cursor:"pointer"},onClick:P=>(_.value=n,t.value=!0)},{default:o(()=>[h("mdi-square-edit-outline")]),_:2},1032,["onClick"]),l(s,{elevation:"0",color:"transparent",loading:n.selectable.loading,ripple:!1},{default:o(()=>[l(g,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:P=>(u.value=n.selectable,i.value=!0)},{default:o(()=>[h("mdi-delete")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])]),"item.latest":o(({item:n})=>[l(D,{color:p(n.selectable.latest)},{default:o(()=>[h(L(n.selectable.latest?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.common":o(({item:n})=>[l(D,{color:p(n.selectable.common)},{default:o(()=>[h(L(n.selectable.common?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.photo":o(({item:n})=>[d("div",ce,[d("img",{width:"100",height:"70",style:{"border-radius":"10px"},src:n.selectable.photo?`data:image/jpg;base64,${n.selectable.photo}`:"",alt:"Test Image"},null,8,pe)])]),"item.creationDate":o(({item:n})=>[d("span",null,L(n.selectable.creationDate.split("T")[0]),1)]),_:1},8,["headers","items","loading"]),e(i)?(N(),k(V,{key:0,openPopup:e(i),onClosePopup:m[1]||(m[1]=n=>i.value=!1),onConfirmDelete:U},null,8,["openPopup"])):B("",!0)]),_:1})]),_:1})):B("",!0)]),_:1}),e(t)?(N(),k($,{key:0,openPopup:e(t),onClosePopup:m[2]||(m[2]=n=>(t.value=!1,_.value=null)),toUpdate:e(_),onRegetData:m[3]||(m[3]=n=>f("regetData"))},null,8,["openPopup","toUpdate"])):B("",!0),e(v)?(N(),k($,{key:1,openPopup:e(v),onClosePopup:m[4]||(m[4]=n=>v.value=!1),onRegetData:m[5]||(m[5]=n=>f("regetData"))},null,8,["openPopup"])):B("",!0)])}}},_e=me,ge={class:"dashboard_tests_page"},ye={__name:"Blogs",setup(A){const f=Y(),{dashboardBlogs:c}=Q(f),v=b(!0),t=async()=>{v.value=!0,await f.doGetDashboardBlogs(),v.value=!1};return I(()=>{t()}),(_,i)=>{const u=_e;return N(),T("div",ge,[l(u,{dashboardBlogs:e(c),loading:e(v),onRegetData:t},null,8,["dashboardBlogs","loading"])])}}};export{ye as default};
