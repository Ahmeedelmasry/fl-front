import{_ as z}from"./DeletePopup.f158edf7.js";import{k as b,z as J,l as I,r,o as U,c as M,b as l,w as o,d as g,t as S,q as O,j as e,a as d,n as H,G as K,h as L,g as P,s as Q}from"./entry.08c37509.js";import{d as Y}from"./blogs.2e45594e.js";import{r as x,m as C,u as T}from"./index.4590c98c.js";import{V as W}from"./VDataTable.cbb22240.js";const X={class:"update_banner"},Z=d("div",null,[g("Set as "),d("strong",null,"Common")],-1),ee=d("div",null,[d("strong",{class:"text-success"},"Yes")],-1),te=d("div",null,[d("strong",{class:"text-red"},"No")],-1),oe=d("div",null,[g("Set as "),d("strong",null,"Latest")],-1),le=d("div",null,[d("strong",{class:"text-success"},"Yes")],-1),ae=d("div",null,[d("strong",{class:"text-red"},"No")],-1),se={class:"actions text-center"},ne={__name:"UpdatePackage",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(A,{emit:$}){const c=A,f=Y(),t=b({titleAR:"",titleEN:"",subjectEN:"",isCommon:!1,isLatest:!1,subjectAR:"",image:[]}),_=b(!1),i=b(!1),u=b(null),w=b(null),j=b({titleEN:{required:x,minLength:C(3)},titleAR:{required:x,minLength:C(3)},subjectEN:{required:x,minLength:C(10)},subjectAR:{required:x,minLength:C(10)},image:{required:x,minLength:C(1)}});J(()=>_.value,m=>{m||setTimeout(()=>{$("closePopup")},200)});let p=T(j,t);const R=async()=>{if(c.toUpdate&&(j.value.image={},p=T(j,t)),await p.value.$validate()){if(i.value=!0,c.toUpdate){const s=new FormData;if(s.append("stringDto",JSON.stringify({id:c.toUpdate.selectable.id,titleAR:t.value.titleAR,titleEN:t.value.titleEN.toUpperCase(),subjectAR:t.value.subjectAR,isLatest:t.value.isLatest,isCommon:t.value.isCommon,subjectEN:t.value.subjectEN})),t.value.image&&t.value.image.length)s.append("photo",t.value.image[0]);else{const h=atob(w.value),v=new ArrayBuffer(h.length),y=new Uint8Array(v);for(let D=0;D<h.length;D++)y[D]=h.charCodeAt(D);const N=new Blob([v],{type:"application/octet-stream"}),E=new File([N],"filename.ext",{type:"application/octet-stream"});s.append("photo",E)}await f.doUpdateDashboardBlogs(s)&&($("regetData"),_.value=!1)}else{const s=new FormData;s.append("stringDto",JSON.stringify({titleAR:t.value.titleAR,titleEN:t.value.titleEN.toUpperCase(),subjectAR:t.value.subjectAR,subjectEN:t.value.subjectEN,isLatest:t.value.isLatest,isCommon:t.value.isCommon})),s.append("photo",t.value.image[0]),await f.doAddDashboardBlogs(s)&&($("regetData"),_.value=!1)}i.value=!1}};return I(()=>{_.value=c.openPopup,c.toUpdate&&(t.value.titleEN=c.toUpdate.selectable.titleEN,t.value.titleAR=c.toUpdate.selectable.titleAR,t.value.subjectAR=c.toUpdate.selectable.subjectAR,t.value.subjectEN=c.toUpdate.selectable.subjectEN,t.value.isCommon=c.toUpdate.selectable.common,t.value.isLatest=c.toUpdate.selectable.latest,w.value=c.toUpdate.selectable.photo),p=T(j,t)}),(m,s)=>{const V=r("v-card-title"),h=r("v-text-field"),v=r("v-col"),y=r("v-radio"),N=r("v-radio-group"),E=r("v-file-input"),D=r("v-textarea"),k=r("v-row"),n=r("v-container"),B=r("v-btn"),q=r("v-form"),F=r("v-card"),G=r("v-dialog");return U(),M("div",X,[l(G,{modelValue:e(_),"onUpdate:modelValue":s[8]||(s[8]=a=>H(_)?_.value=a:null),persistent:"",fullscreen:""},{default:o(()=>[l(F,null,{default:o(()=>[l(V,{class:"mb-5 text-center bg-grey-lighten-3"},{default:o(()=>[g(S(A.toUpdate?"Update Blog":"Add Blog"),1)]),_:1}),l(q,{class:"pa-5",onSubmit:O(R,["prevent"])},{default:o(()=>[l(n,null,{default:o(()=>[l(k,null,{default:o(()=>[l(v,{cols:"12",sm:"6"},{default:o(()=>[l(h,{label:"English Title",variant:"outlined",disabled:e(i)||e(u),modelValue:e(t).titleEN,"onUpdate:modelValue":s[0]||(s[0]=a=>e(t).titleEN=a),"error-messages":e(p).$errors.find(a=>a.$property=="titleEN")?e(p).$errors.find(a=>a.$property=="titleEN").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),l(v,{cols:"12",sm:"6"},{default:o(()=>[l(h,{label:"Arabic Title",disabled:e(i)||e(u),variant:"outlined",modelValue:e(t).titleAR,"onUpdate:modelValue":s[1]||(s[1]=a=>e(t).titleAR=a),"error-messages":e(p).$errors.find(a=>a.$property=="titleAR")?e(p).$errors.find(a=>a.$property=="titleAR").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),l(v,{cols:"12",sm:"3"},{default:o(()=>[l(N,{modelValue:e(t).isCommon,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).isCommon=a)},{label:o(()=>[Z]),default:o(()=>[l(y,{value:!0,disabled:e(u)||e(i)},{label:o(()=>[ee]),_:1},8,["disabled"]),l(y,{value:!1,disabled:e(u)||e(i)},{label:o(()=>[te]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),l(v,{cols:"12",sm:"3"},{default:o(()=>[l(N,{modelValue:e(t).isLatest,"onUpdate:modelValue":s[3]||(s[3]=a=>e(t).isLatest=a)},{label:o(()=>[oe]),default:o(()=>[l(y,{value:!0,disabled:e(u)||e(i)},{label:o(()=>[le]),_:1},8,["disabled"]),l(y,{value:!1,disabled:e(u)||e(i)},{label:o(()=>[ae]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),l(v,{cols:"12",sm:"6"},{default:o(()=>[l(E,{modelValue:e(t).image,"onUpdate:modelValue":s[4]||(s[4]=a=>e(t).image=a),variant:"outlined",label:"Test Image",disabled:e(u)||e(i),accept:".jpg, .jpeg, png","error-messages":e(p).$errors.find(a=>a.$property=="image")?e(p).$errors.find(a=>a.$property=="image").$message:""},null,8,["modelValue","disabled","error-messages"])]),_:1}),l(v,{cols:"12"},{default:o(()=>[l(D,{label:"English Subject",disabled:e(i)||e(u),variant:"outlined",modelValue:e(t).subjectEN,"onUpdate:modelValue":s[5]||(s[5]=a=>e(t).subjectEN=a),"error-messages":e(p).$errors.find(a=>a.$property=="subjectEN")?e(p).$errors.find(a=>a.$property=="subjectEN").$message:"",rows:"15"},null,8,["disabled","modelValue","error-messages"])]),_:1}),l(v,{cols:"12"},{default:o(()=>[l(D,{label:"Arabic Subject",variant:"outlined",disabled:e(i)||e(u),modelValue:e(t).subjectAR,"onUpdate:modelValue":s[6]||(s[6]=a=>e(t).subjectAR=a),"error-messages":e(p).$errors.find(a=>a.$property=="subjectAR")?e(p).$errors.find(a=>a.$property=="subjectAR").$message:"",rows:"15"},null,8,["disabled","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),d("div",se,[l(B,{color:"red",class:"mr-3",onClick:s[7]||(s[7]=a=>_.value=!1),disabled:e(i)||e(u)},{default:o(()=>[g("Cancel")]),_:1},8,["disabled"]),l(B,{color:"green",type:"submit",loading:e(i)},{default:o(()=>[g("Save")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},ie=ne,re={class:"dashboard_banners_listing"},de={class:"heading d-flex justify-space-between align-center"},ue=d("h2",{class:"my-3"},"Blogs",-1),ce={class:"d-flex align-center justify-center"},pe={class:"py-3"},me=["src"],_e={__name:"Listing",props:["dashboardBlogs","loading"],emits:["regetData"],setup(A,{emit:$}){const c=K(),f=b(!1),t=b(!1),_=b(null),i=b(!1),u=b(null),w=b([{title:"English Title",key:"titleEN"},{title:"Arabic Title",key:"titleAR"},{title:"Photo",key:"photo"},{title:"Latest",key:"latest"},{title:"Common",key:"common"},{title:"Post Date",key:"creationDate"},{title:"Actions",key:"actions"}]),j=async()=>{i.value=!1,u.value.loading=!0,await c.doDeleteItem("blog",u.value.id)&&$("regetData"),u.value.loading=!1},p=R=>R?"green":"red";return(R,m)=>{const s=r("v-btn"),V=r("v-col"),h=r("v-row"),v=r("v-icon"),y=r("v-tooltip"),N=r("v-chip"),E=z,D=r("v-container"),k=ie;return U(),M("div",re,[l(D,{fluid:""},{default:o(()=>[l(h,null,{default:o(()=>[l(V,{cols:"12"},{default:o(()=>[d("div",de,[ue,l(s,{onClick:m[0]||(m[0]=n=>f.value=!0),width:"150px",height:"45px",color:"blue"},{default:o(()=>[g("Add Blog")]),_:1})])]),_:1})]),_:1}),A.dashboardBlogs?(U(),L(h,{key:0,class:"px-4"},{default:o(()=>[l(V,{cols:"12",class:"section_container dashboard_table"},{default:o(()=>[l(e(W),{headers:e(w),items:A.dashboardBlogs.content,loading:A.loading,"fixed-header":!0,"fixed-footer":!0},{"item.actions":o(({item:n})=>[d("div",ce,[l(v,{color:"blue",style:{cursor:"pointer"},onClick:B=>(_.value=n,t.value=!0)},{default:o(()=>[g("mdi-square-edit-outline")]),_:2},1032,["onClick"]),l(y,{activator:"parent",location:"bottom center"},{default:o(()=>[g("Update")]),_:1}),l(s,{elevation:"0",color:"transparent",loading:n.selectable.loading,onClick:B=>(u.value=n.selectable,i.value=!0),ripple:!1},{default:o(()=>[l(v,{color:"red",size:"23"},{default:o(()=>[g("mdi-delete")]),_:1}),l(y,{activator:"parent",location:"bottom center"},{default:o(()=>[g("Delete")]),_:1})]),_:2},1032,["loading","onClick"])])]),"item.latest":o(({item:n})=>[l(N,{color:p(n.selectable.latest)},{default:o(()=>[g(S(n.selectable.latest?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.common":o(({item:n})=>[l(N,{color:p(n.selectable.common)},{default:o(()=>[g(S(n.selectable.common?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.photo":o(({item:n})=>[d("div",pe,[d("img",{width:"100",height:"70",style:{"border-radius":"10px"},src:n.selectable.photo?`data:image/jpg;base64,${n.selectable.photo}`:"",alt:"Test Image"},null,8,me)])]),"item.creationDate":o(({item:n})=>[d("span",null,S(n.selectable.creationDate.split("T")[0]),1)]),_:1},8,["headers","items","loading"]),e(i)?(U(),L(E,{key:0,openPopup:e(i),onClosePopup:m[1]||(m[1]=n=>i.value=!1),onConfirmDelete:j},null,8,["openPopup"])):P("",!0)]),_:1})]),_:1})):P("",!0)]),_:1}),e(t)?(U(),L(k,{key:0,openPopup:e(t),onClosePopup:m[2]||(m[2]=n=>(t.value=!1,_.value=null)),toUpdate:e(_),onRegetData:m[3]||(m[3]=n=>$("regetData"))},null,8,["openPopup","toUpdate"])):P("",!0),e(f)?(U(),L(k,{key:1,openPopup:e(f),onClosePopup:m[4]||(m[4]=n=>f.value=!1),onRegetData:m[5]||(m[5]=n=>$("regetData"))},null,8,["openPopup"])):P("",!0)])}}},ve=_e,be={class:"dashboard_tests_page"},De={__name:"Blogs",setup(A){const $=Y(),{dashboardBlogs:c}=Q($),f=b(!0),t=async()=>{f.value=!0,await $.doGetDashboardBlogs(),f.value=!1};return I(()=>{t()}),(_,i)=>{const u=ve;return U(),M("div",be,[l(u,{dashboardBlogs:e(c),loading:e(f),onRegetData:t},null,8,["dashboardBlogs","loading"])])}}};export{De as default};
