import{k as c,z as K,l as H,r as u,o as _,c as T,b as t,w as s,d as A,t as F,q as J,j as a,a as m,n as G,g as w,F as O,i as Q,h as P,G as Y,s as Z}from"./entry.08c37509.js";import{d as X}from"./branches.f2e0f767.js";import{r as k,m as x,n as ee,a as oe,u as q}from"./index.4590c98c.js";import{_ as ae}from"./DeletePopup.f158edf7.js";import{V as te}from"./VDataTable.cbb22240.js";const le={class:"update_banner"},se=["onSubmit"],ne={key:0},re={class:"actions text-center"},de={__name:"UpdateBranch",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(y,{emit:g}){const r=y,i=X(),f=[{name:"Saturday",value:"Saturday"},{name:"Sunday",value:"Sunday"},{name:"Monday",value:"Monday"},{name:"Tuesday",value:"Tuesday"},{name:"Wednesday",value:"Wednesday"},{name:"Thursday",value:"Thursday"},{name:"Friday",value:"Friday"}],e=c({nameEN:"",nameAR:"",addressEN:"",addressAR:"",fax:"",dayFrom:"",dayTo:"",hourFrom:"",hourTo:"",location:"",locationLink:"",phones:[]}),v=c(!1),$=c(!1),b=c(""),U=c({nameEN:{required:k,minLength:x(3)},nameAR:{required:k,minLength:x(3)},addressEN:{required:k,minLength:x(3)},addressAR:{required:k,minLength:x(3)},fax:{required:k,minLength:x(5),numeric:ee},dayFrom:{required:k},dayTo:{required:k},hourFrom:{required:k},hourTo:{required:k},location:{required:k,minLength:x(30)},locationLink:{required:k,url:oe},phones:{required:k,minLength:x(1)}});K(()=>v.value,V=>{V||setTimeout(()=>{g("closePopup")},200)});const N=()=>{e.value.phones.find(V=>V==b.value)||e.value.phones.push(b.value),b.value=""},S=V=>{e.value.phones.splice(V,1)};let n=q(U,e);const W=async()=>{r.toUpdate&&(U.value.image={},n=q(U,e)),await n.value.$validate()&&($.value=!0,r.toUpdate?await i.doUpdateDashboardBranches({id:r.toUpdate.selectable.id,nameEN:e.value.nameEN,nameAR:e.value.nameAR,addressEN:e.value.addressEN,addressAR:e.value.addressAR,phones:e.value.phones.join(","),fax:e.value.fax,dayFrom:e.value.dayFrom,dayTo:e.value.dayTo,hourFrom:e.value.hourFrom.split(":")[0]>=12?`${e.value.hourFrom.split(":")[0]-12}:${e.value.hourFrom.split(":")[1]} PM`:`${e.value.hourFrom.split(":")[0]}:${e.value.hourFrom.split(":")[1]} AM`,hourTo:e.value.hourTo.split(":")[0]>=12?`${e.value.hourTo.split(":")[0]-12}:${e.value.hourTo.split(":")[1]} PM`:`${e.value.hourTo.split(":")[0]}:${e.value.hourTo.split(":")[1]} AM`,location:e.value.location,locationLink:e.value.locationLink})&&(g("regetData"),v.value=!1):await i.doAddDashboardBranches({nameEN:e.value.nameEN,nameAR:e.value.nameAR,addressEN:e.value.addressEN,addressAR:e.value.addressAR,phones:e.value.phones.join(","),fax:e.value.fax,dayFrom:e.value.dayFrom,dayTo:e.value.dayTo,hourFrom:e.value.hourFrom.split(":")[0]>=12?`${e.value.hourFrom.split(":")[0]-12}:${e.value.hourFrom.split(":")[1]} PM`:`${e.value.hourFrom.split(":")[0]}:${e.value.hourFrom.split(":")[1]} AM`,hourTo:e.value.hourTo.split(":")[0]>=12?`${e.value.hourTo.split(":")[0]-12}:${e.value.hourTo.split(":")[1]} PM`:`${e.value.hourTo.split(":")[0]}:${e.value.hourTo.split(":")[1]} AM`,location:e.value.location,locationLink:e.value.locationLink})&&(g("regetData"),v.value=!1),$.value=!1)};return H(()=>{v.value=r.openPopup,r.toUpdate&&(e.value.nameEN=r.toUpdate.selectable.nameEN,e.value.nameAR=r.toUpdate.selectable.nameAR,e.value.addressEN=r.toUpdate.selectable.addressEN,e.value.addressAR=r.toUpdate.selectable.addressAR,e.value.fax=r.toUpdate.selectable.fax,e.value.phones=r.toUpdate.selectable.allPhones,e.value.dayFrom=r.toUpdate.selectable.dayFrom,e.value.dayTo=r.toUpdate.selectable.dayTo,e.value.hourFrom=r.toUpdate.selectable.hourFrom.split(" ")[0],e.value.hourTo=r.toUpdate.selectable.hourTo.split(" ")[0],e.value.location=r.toUpdate.selectable.location,e.value.locationLink=r.toUpdate.selectable.locationLink,n=q(U,e))}),(V,l)=>{const R=u("v-card-title"),h=u("v-text-field"),p=u("v-col"),D=u("v-icon"),E=u("v-chip"),B=u("v-select"),M=u("v-row"),z=u("v-container"),C=u("v-btn"),d=u("v-form"),L=u("v-card"),j=u("v-dialog");return _(),T("div",le,[t(j,{modelValue:a(v),"onUpdate:modelValue":l[13]||(l[13]=o=>G(v)?v.value=o:null),width:"900",persistent:""},{default:s(()=>[t(L,null,{default:s(()=>[t(R,{class:"mb-5 text-center bg-grey-lighten-3"},{default:s(()=>[A(F(y.toUpdate?"Update Branch":"Add Branch"),1)]),_:1}),t(d,{class:"pa-5",onSubmit:J(W,["prevent"])},{default:s(()=>[t(z,null,{default:s(()=>[t(M,null,{default:s(()=>[t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t(h,{label:"English Branch Name",variant:"outlined",modelValue:a(e).nameEN,"onUpdate:modelValue":l[0]||(l[0]=o=>a(e).nameEN=o),"error-messages":a(n).$errors.find(o=>o.$property=="nameEN")?a(n).$errors.find(o=>o.$property=="nameEN").$message:""},null,8,["modelValue","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t(h,{label:"Arabic Branch Name",variant:"outlined",modelValue:a(e).nameAR,"onUpdate:modelValue":l[1]||(l[1]=o=>a(e).nameAR=o),"error-messages":a(n).$errors.find(o=>o.$property=="nameAR")?a(n).$errors.find(o=>o.$property=="nameAR").$message:""},null,8,["modelValue","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t(h,{label:"English Branch Address",variant:"outlined",modelValue:a(e).addressEN,"onUpdate:modelValue":l[2]||(l[2]=o=>a(e).addressEN=o),"error-messages":a(n).$errors.find(o=>o.$property=="addressEN")?a(n).$errors.find(o=>o.$property=="addressEN").$message:""},null,8,["modelValue","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t(h,{label:"Arabic Branch Address",variant:"outlined",modelValue:a(e).addressAR,"onUpdate:modelValue":l[3]||(l[3]=o=>a(e).addressAR=o),"error-messages":a(n).$errors.find(o=>o.$property=="addressAR")?a(n).$errors.find(o=>o.$property=="addressAR").$message:""},null,8,["modelValue","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[m("form",{action:"",onSubmit:J(N,["prevent"])},[t(h,{label:"Add Branch Phone",type:"number",variant:"outlined",modelValue:a(b),"onUpdate:modelValue":l[4]||(l[4]=o=>G(b)?b.value=o:null),"error-messages":a(n).$errors.find(o=>o.$property=="phones")?a(n).$errors.find(o=>o.$property=="phones").$message:""},null,8,["modelValue","error-messages"])],40,se)]),_:1}),t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t(h,{label:"Branch Fax",variant:"outlined",modelValue:a(e).fax,"onUpdate:modelValue":l[5]||(l[5]=o=>a(e).fax=o),"error-messages":a(n).$errors.find(o=>o.$property=="fax")?a(n).$errors.find(o=>o.$property=="fax").$message:""},null,8,["modelValue","error-messages"])]),_:1}),t(p,{cols:"12 pt-0 mt-0"},{default:s(()=>[a(e).phones.length?(_(),T("span",ne,"Added Phones: ")):w("",!0),(_(!0),T(O,null,Q(a(e).phones,(o,I)=>(_(),P(E,{key:I,onClick:Fe=>S(I),class:"mr-1"},{default:s(()=>[t(D,{size:"15"},{default:s(()=>[A("mdi-close")]),_:1}),A(" "+F(o),1)]),_:2},1032,["onClick"]))),128))]),_:1}),t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t(B,{label:"Work Day From",items:f,variant:"outlined","item-title":"name","item-value":"value",transition:"slide",modelValue:a(e).dayFrom,"onUpdate:modelValue":l[6]||(l[6]=o=>a(e).dayFrom=o),"error-messages":a(n).$errors.find(o=>o.$property=="dayFrom")?a(n).$errors.find(o=>o.$property=="dayFrom").$message:""},null,8,["modelValue","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t(B,{label:"Work Day To",variant:"outlined",transition:"slide","item-title":"name","item-value":"value",items:f,modelValue:a(e).dayTo,"onUpdate:modelValue":l[7]||(l[7]=o=>a(e).dayTo=o),"error-messages":a(n).$errors.find(o=>o.$property=="dayTo")?a(n).$errors.find(o=>o.$property=="dayTo").$message:""},null,8,["modelValue","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t(h,{label:"Work Hour From",type:"time",format:"h:mm a",variant:"outlined",modelValue:a(e).hourFrom,"onUpdate:modelValue":l[8]||(l[8]=o=>a(e).hourFrom=o),"error-messages":a(n).$errors.find(o=>o.$property=="hourFrom")?a(n).$errors.find(o=>o.$property=="hourFrom").$message:""},null,8,["modelValue","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t(h,{label:"Work Hour To",type:"time",variant:"outlined",modelValue:a(e).hourTo,"onUpdate:modelValue":l[9]||(l[9]=o=>a(e).hourTo=o),"error-messages":a(n).$errors.find(o=>o.$property=="hourTo")?a(n).$errors.find(o=>o.$property=="hourTo").$message:""},null,8,["modelValue","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t(h,{label:"Location Preview",variant:"outlined",modelValue:a(e).location,"onUpdate:modelValue":l[10]||(l[10]=o=>a(e).location=o),"error-messages":a(n).$errors.find(o=>o.$property=="location")?a(n).$errors.find(o=>o.$property=="location").$message:""},null,8,["modelValue","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6",md:"4"},{default:s(()=>[t(h,{label:"Location Url",variant:"outlined",modelValue:a(e).locationLink,"onUpdate:modelValue":l[11]||(l[11]=o=>a(e).locationLink=o),"error-messages":a(n).$errors.find(o=>o.$property=="locationLink")?a(n).$errors.find(o=>o.$property=="locationLink").$message:""},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),m("div",re,[t(C,{color:"red",class:"mr-3",onClick:l[12]||(l[12]=o=>v.value=!1),disabled:a($)},{default:s(()=>[A("Cancel")]),_:1},8,["disabled"]),t(C,{color:"green",type:"submit",loading:a($)},{default:s(()=>[A("Save")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},ue=de;const ie={class:"view_dashboard_branch_map"},me={key:0,class:"map position-relative"},pe=["src"],ce={class:"map_overlay"},ve=["href"],_e=m("button",null,[m("svg",{class:"svg-inline--fa fa-map fa-w-18","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"map",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512","data-fa-i2svg":"",width:"30"},[m("path",{fill:"#669930",d:"M0 117.66v346.32c0 11.32 11.43 19.06 21.94 14.86L160 416V32L20.12 87.95A32.006 32.006 0 0 0 0 117.66zM192 416l192 64V96L192 32v384zM554.06 33.16L416 96v384l139.88-55.95A31.996 31.996 0 0 0 576 394.34V48.02c0-11.32-11.43-19.06-21.94-14.86z"})])],-1),fe=[_e],he={__name:"ViewMap",props:["mapUrl","openPopup","mapPreview"],emits:["close_popup"],setup(y,{emit:g}){const r=y,i=c(!0);return K(()=>i.value,f=>{f||setTimeout(()=>{g("close_popup")},500)}),H(()=>{i.value=r.openPopup}),(f,e)=>{const v=u("v-card"),$=u("v-dialog");return _(),T("div",ie,[t($,{modelValue:a(i),"onUpdate:modelValue":e[0]||(e[0]=b=>G(i)?i.value=b:null),"max-width":"700"},{default:s(()=>[t(v,null,{default:s(()=>[y.mapUrl?(_(),T("div",me,[m("iframe",{src:y.mapPreview,style:{border:"0"},allowfullscreen:"",loading:"lazy"},null,8,pe),m("div",ce,[m("a",{href:y.mapUrl,target:"_blank"},fe,8,ve)])])):w("",!0)]),_:1})]),_:1},8,["modelValue"])])}}},ye=he,ge={class:"dashboard_banners_listing"},$e={class:"heading d-flex justify-space-between align-center"},be=m("h2",{class:"my-3"},"Branches",-1),Ve={class:"text-center"},ke={style:{"list-style":"none"}},Ae={class:"d-flex flex-column justify-center align-center",style:{gap:"10px"}},Ue={__name:"Listing",props:["dashboardBranches","loading"],emits:["regetData"],setup(y,{emit:g}){const r=Y(),i=c(!1),f=c(!1),e=c(!1),v=c(null),$=c(null),b=c(null),U=c(!1),N=c(null),S=c([{title:"Name EN",key:"nameEN"},{title:"Name AR",key:"nameAR"},{title:"Address EN",key:"addressEN"},{title:"Address AR",key:"addressAR"},{title:"Fax",key:"fax"},{title:"Phones",key:"phones"},{title:"Work Days",key:"days"},{title:"Work Days",key:"hours"},{title:"Location",key:"location"},{title:"Actions",key:"actions"}]),n=V=>{$.value=V.location,b.value=V.locationLink,e.value=!0},W=async()=>{U.value=!1,N.value.loading=!0,await r.doDeleteItem("branch",N.value.id)&&g("regetData"),N.value.loading=!1};return(V,l)=>{const R=u("v-btn"),h=u("v-col"),p=u("v-row"),D=u("v-icon"),E=u("v-tooltip"),B=u("v-container"),M=ue,z=ye,C=ae;return _(),T("div",ge,[t(B,{fluid:""},{default:s(()=>[t(p,null,{default:s(()=>[t(h,{cols:"12"},{default:s(()=>[m("div",$e,[be,t(R,{onClick:l[0]||(l[0]=d=>i.value=!0),width:"150px",height:"45px",color:"blue"},{default:s(()=>[A("Add Branch")]),_:1})])]),_:1})]),_:1}),y.dashboardBranches?(_(),P(p,{key:0,class:"px-4"},{default:s(()=>[t(h,{cols:"12",class:"section_container dashboard_table"},{default:s(()=>[t(a(te),{headers:a(S),items:y.dashboardBranches.content,loading:y.loading,search:""},{"item.days":s(({item:d})=>[m("div",null,F(d.selectable.dayFrom)+" - "+F(d.selectable.dayTo),1)]),"item.hours":s(({item:d})=>[m("div",null,F(d.selectable.hourFrom)+" - "+F(d.selectable.hourTo),1)]),"item.location":s(({item:d})=>[m("div",Ve,[m("span",null,[t(D,{style:{cursor:"pointer"},color:"green",onClick:L=>n(d.selectable)},{default:s(()=>[A("mdi-map-marker ")]),_:2},1032,["onClick"]),t(E,{activator:"parent"},{default:s(()=>[A(" Show Location ")]),_:1})])])]),"item.phones":s(({item:d})=>[m("div",null,[m("ul",ke,[(_(!0),T(O,null,Q(d.selectable.allPhones,(L,j)=>(_(),T("li",{key:j},F(L),1))),128))])])]),"item.actions":s(({item:d})=>[m("div",Ae,[t(R,{elevation:"0",onClick:L=>(v.value=d,f.value=!0)},{default:s(()=>[t(D,{color:"blue"},{default:s(()=>[A("mdi-square-edit-outline")]),_:1}),t(E,{activator:"parent",location:"bottom center"},{default:s(()=>[A("Edit")]),_:1})]),_:2},1032,["onClick"]),t(R,{elevation:"0",color:"transparent",loading:d.selectable.loading,ripple:!1},{default:s(()=>[t(D,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:L=>(N.value=d.selectable,U.value=!0)},{default:s(()=>[A("mdi-delete")]),_:2},1032,["onClick"]),t(E,{activator:"parent",location:"bottom center"},{default:s(()=>[A("Delete")]),_:1})]),_:2},1032,["loading"])])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1})):w("",!0)]),_:1}),a(f)?(_(),P(M,{key:0,openPopup:a(f),onClosePopup:l[1]||(l[1]=d=>(f.value=!1,v.value=null)),toUpdate:a(v),onRegetData:l[2]||(l[2]=d=>g("regetData"))},null,8,["openPopup","toUpdate"])):w("",!0),a(i)?(_(),P(M,{key:1,openPopup:a(i),onClosePopup:l[3]||(l[3]=d=>i.value=!1),onRegetData:l[4]||(l[4]=d=>g("regetData"))},null,8,["openPopup"])):w("",!0),a(e)?(_(),P(z,{key:2,onClose_popup:l[5]||(l[5]=d=>(e.value=!1,$.value=null,b.value=null)),openPopup:a(e),mapPreview:a($),mapUrl:a(b)},null,8,["openPopup","mapPreview","mapUrl"])):w("",!0),a(U)?(_(),P(C,{key:3,openPopup:a(U),onClosePopup:l[6]||(l[6]=d=>U.value=!1),onConfirmDelete:W},null,8,["openPopup"])):w("",!0)])}}},Te=Ue,xe={class:"dashboard_tests_page"},De={__name:"Branches",setup(y){const g=X(),{dashboardBranches:r}=Z(g),i=c(!0),f=async()=>{i.value=!0,await g.doGetDashboardBranches(),i.value=!1};return H(()=>{f()}),(e,v)=>{const $=Te;return _(),T("div",xe,[t($,{dashboardBranches:a(r),loading:a(i),onRegetData:f},null,8,["dashboardBranches","loading"])])}}};export{De as default};
