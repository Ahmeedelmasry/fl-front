import{_ as j}from"./DeletePopup.f158edf7.js";import{d as M}from"./contact.263d83be.js";import{G as A,k as _,r as l,o as u,c as C,b as t,w as e,h as x,j as o,d as g,g as h,a as T,s as G,l as L}from"./entry.08c37509.js";import{V as R}from"./VDataTable.cbb22240.js";const I={class:"dashboard_banners_listing"},S=T("div",{class:"heading d-flex justify-space-between align-center"},[T("h2",{class:"my-3"},"Contact Messages")],-1),z={key:0},E={__name:"Listing",props:["dashboardContact","loading"],emits:["regetData"],setup(p,{emit:c}){const f=A(),r=M(),n=_(!1),s=_(!1),d=_(null),v=_([{title:"Name Question",key:"clientName"},{title:"Phone",key:"clientPhone"},{title:"Message",key:"messageText"},{title:"Message Type",key:"messageType"},{title:"Actions",key:"actions"}]),w=async a=>{if(!a.read){const m={id:a.id,clientName:a.clientName,clientPhone:a.clientPhone,messageType:a.messageType,messageText:a.messageText,read:!0};n.value=!0,await r.doUpdateDashboardContact(m)&&c("regetData"),n.value=!1}},N=async()=>{s.value=!1,d.value.loading=!0,await f.doDeleteItem("clientMessage",d.value.id)&&c("regetData"),d.value.loading=!1};return(a,m)=>{const b=l("v-col"),k=l("v-row"),y=l("v-icon"),D=l("v-tooltip"),P=l("v-btn"),V=j,$=l("v-container");return u(),C("div",I,[t($,{fluid:""},{default:e(()=>[t(k,null,{default:e(()=>[t(b,{cols:"12"},{default:e(()=>[S]),_:1})]),_:1}),p.dashboardContact?(u(),x(k,{key:0,class:"px-4"},{default:e(()=>[t(b,{cols:"12",class:"section_container dashboard_table"},{default:e(()=>[t(o(R),{headers:o(v),items:p.dashboardContact.content,loading:p.loading},{"item.actions":e(({item:i})=>[i.selectable.read?h("",!0):(u(),C("span",z,[t(y,{color:"blue",style:{cursor:"pointer"},onClick:B=>w(i.selectable),loading:o(n)},{default:e(()=>[g("mdi-check-all")]),_:2},1032,["onClick","loading"]),t(D,{activator:"parent"},{default:e(()=>[g(" Mark as read ")]),_:1})])),t(P,{elevation:"0",color:"transparent",loading:i.selectable.loading,ripple:!1},{default:e(()=>[t(y,{color:"red",style:{cursor:"pointer"},size:"23",onClick:B=>(d.value=i.selectable,s.value=!0)},{default:e(()=>[g("mdi-delete")]),_:2},1032,["onClick"]),t(D,{activator:"parent",location:"bottom center"},{default:e(()=>[g("Delete")]),_:1})]),_:2},1032,["loading"])]),_:1},8,["headers","items","loading"]),o(s)?(u(),x(V,{key:0,openPopup:o(s),onClosePopup:m[0]||(m[0]=i=>s.value=!1),onConfirmDelete:N},null,8,["openPopup"])):h("",!0)]),_:1})]),_:1})):h("",!0)]),_:1})])}}},Q=E,U={class:"dashboard_tests_page"},K={__name:"Contact",setup(p){const c=M(),{dashboardContact:f}=G(c),r=_(!0),n=async()=>{r.value=!0,await c.doGetDashboardContact(),r.value=!1};return L(()=>{n()}),(s,d)=>{const v=Q;return u(),C("div",U,[t(v,{dashboardContact:o(f),loading:o(r),onRegetData:n},null,8,["dashboardContact","loading"])])}}};export{K as default};
