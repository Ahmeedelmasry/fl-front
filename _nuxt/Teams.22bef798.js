import{_ as K}from"./DeletePopup.f158edf7.js";import{D as Q,E as S,G as $,H as B,s as q,k as v,z as W,l as I,r as m,o as y,c as J,b as o,w as l,d as T,t as F,q as X,j as e,h as P,g as L,a as j,n as Z}from"./entry.08c37509.js";import{d as ee}from"./branches.f2e0f767.js";import{r as D,m as C,e as ae,u as G}from"./index.4590c98c.js";import{V as te}from"./VDataTable.cbb22240.js";const O=Q("dashboardTeamStore",{state:()=>({dashboardTeam:[]}),actions:{async doGetDashboardTeam(){this.dashboardTeam=[],await S.get(`${$().apiURL}/FutureLab/teamMember?lang=${B().lang[0]}`).then(p=>{this.dashboardTeam=p.data})},async doAddDashboardTeam(p){let i;return await S({data:p,method:"POST",url:`${$().apiURL}/FutureLab/teamMember?lang=${B().lang[0]}`,headers:{"Content-Type":"multipart/form-data"}}).then(r=>{i=!0,this.dashboardTeam=r.data,$().callResponse(!0,r.data.message,1)}).catch(r=>{i=!1,$().callResponse(!0,r.response.data.message,2)}),i},async doUpdateDashboardTeam(p){let i;return await S({data:p,method:"PATCH",url:`${$().apiURL}/FutureLab/teamMember?lang=${B().lang[0]}`,headers:{"Content-Type":"multipart/form-data"}}).then(r=>{i=!0,this.dashboardTeam=r.data,$().callResponse(!0,r.data.message,1)}).catch(r=>{$().callResponse(!0,r.response.data.message,2),i=!1}),i}}}),oe={class:"update_banner"},le={class:"actions text-center"},se={__name:"UpdateMember",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(p,{emit:i}){const r=p,g=O(),h=ee(),{dashboardBranches:A}=q(h),a=v({nameEN:"",nameAR:"",jobTitleEN:"",jobTitleAR:"",email:"",branch:""}),u=v(!1),_=v(!1),c=v(!1),V=v({nameEN:{required:D,minLength:C(3)},nameAR:{required:D,minLength:C(3)},jobTitleEN:{required:D,minLength:C(3)},jobTitleAR:{required:D,minLength:C(3)},email:{required:D,email:ae},branch:{required:D},image:{required:D,minLength:C(1)}}),N=v(null);W(()=>u.value,R=>{R||setTimeout(()=>{i("closePopup")},200)});let n=G(V,a);const w=async()=>{if(r.toUpdate&&(V.value.image={},n=G(V,a)),await n.value.$validate()){if(c.value=!0,r.toUpdate){const s=new FormData;if(s.append("stringDto",JSON.stringify({id:r.toUpdate.selectable.id,nameEN:a.value.nameEN,nameAR:a.value.nameAR,jobTitleEN:a.value.jobTitleEN,jobTitleAR:a.value.jobTitleAR,email:a.value.email,branch:{id:a.value.branch},isActive:!0})),a.value.image&&a.value.image.length)s.append("photo",a.value.image[0]);else{const f=atob(N.value),b=new ArrayBuffer(f.length),k=new Uint8Array(b);for(let d=0;d<f.length;d++)k[d]=f.charCodeAt(d);const x=new Blob([b],{type:"application/octet-stream"}),U=new File([x],"filename.ext",{type:"application/octet-stream"});s.append("photo",U)}await g.doUpdateDashboardTeam(s)&&(i("regetData"),u.value=!1)}else{const s=new FormData;s.append("stringDto",JSON.stringify({nameEN:a.value.nameEN,nameAR:a.value.nameAR,jobTitleEN:a.value.jobTitleEN,jobTitleAR:a.value.jobTitleAR,email:a.value.email,branch:{id:a.value.branch},isActive:!0})),s.append("photo",a.value.image[0]),await g.doAddDashboardTeam(s)&&(i("regetData"),u.value=!1)}c.value=!1}};return I(async()=>{_.value=!0,u.value=r.openPopup,await h.doGetDashboardBranches(),r.toUpdate&&(a.value.nameEN=r.toUpdate.selectable.nameEN,a.value.nameAR=r.toUpdate.selectable.nameAR,a.value.jobTitleEN=r.toUpdate.selectable.jobTitleEN,a.value.jobTitleAR=r.toUpdate.selectable.jobTitleAR,a.value.email=r.toUpdate.selectable.email,a.value.branch=r.toUpdate.selectable.branch.id,N.value=r.toUpdate.selectable.photo),_.value=!1}),(R,s)=>{const E=m("v-card-title"),f=m("v-text-field"),b=m("v-col"),k=m("v-select"),x=m("v-file-input"),U=m("v-row"),d=m("v-container"),M=m("v-btn"),z=m("v-form"),H=m("v-card"),Y=m("v-dialog");return y(),J("div",oe,[o(Y,{modelValue:e(u),"onUpdate:modelValue":s[8]||(s[8]=t=>Z(u)?u.value=t:null),width:"700",persistent:""},{default:l(()=>[o(H,null,{default:l(()=>[o(E,{class:"mb-5 text-center bg-grey-lighten-3"},{default:l(()=>[T(F(p.toUpdate?"Update Member":"Add Member"),1)]),_:1}),o(z,{class:"pa-5",onSubmit:X(w,["prevent"])},{default:l(()=>[o(d,null,{default:l(()=>[o(U,null,{default:l(()=>[o(b,{cols:"12",sm:"6"},{default:l(()=>[o(f,{label:"English Name",disabled:e(_)||e(c),variant:"outlined",modelValue:e(a).nameEN,"onUpdate:modelValue":s[0]||(s[0]=t=>e(a).nameEN=t),"error-messages":e(n).$errors.find(t=>t.$property=="nameEN")?e(n).$errors.find(t=>t.$property=="nameEN").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(b,{cols:"12",sm:"6"},{default:l(()=>[o(f,{label:"Arabic Name",disabled:e(_)||e(c),variant:"outlined",modelValue:e(a).nameAR,"onUpdate:modelValue":s[1]||(s[1]=t=>e(a).nameAR=t),"error-messages":e(n).$errors.find(t=>t.$property=="nameAR")?e(n).$errors.find(t=>t.$property=="nameAR").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(b,{cols:"12",sm:"6"},{default:l(()=>[o(f,{label:"English Job Title",disabled:e(_)||e(c),variant:"outlined",modelValue:e(a).jobTitleEN,"onUpdate:modelValue":s[2]||(s[2]=t=>e(a).jobTitleEN=t),"error-messages":e(n).$errors.find(t=>t.$property=="jobTitleEN")?e(n).$errors.find(t=>t.$property=="jobTitleEN").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(b,{cols:"12",sm:"6"},{default:l(()=>[o(f,{label:"Arabic Job Title",disabled:e(_)||e(c),variant:"outlined",modelValue:e(a).jobTitleAR,"onUpdate:modelValue":s[3]||(s[3]=t=>e(a).jobTitleAR=t),"error-messages":e(n).$errors.find(t=>t.$property=="jobTitleAR")?e(n).$errors.find(t=>t.$property=="jobTitleAR").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(b,{cols:"12",sm:"6"},{default:l(()=>[o(f,{label:"Email Address",disabled:e(_)||e(c),variant:"outlined",modelValue:e(a).email,"onUpdate:modelValue":s[4]||(s[4]=t=>e(a).email=t),"error-messages":e(n).$errors.find(t=>t.$property=="email")?e(n).$errors.find(t=>t.$property=="email").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(b,{cols:"12",sm:"6"},{default:l(()=>[e(A).content?(y(),P(k,{key:0,items:e(A).content,"item-title":"nameEN",variant:"outlined","item-value":"id",disabled:e(_)||e(c),label:"Select Branch",modelValue:e(a).branch,"onUpdate:modelValue":s[5]||(s[5]=t=>e(a).branch=t),"error-messages":e(n).$errors.find(t=>t.$property=="branch")?e(n).$errors.find(t=>t.$property=="branch").$message:""},null,8,["items","disabled","modelValue","error-messages"])):L("",!0)]),_:1}),o(b,{cols:"12"},{default:l(()=>[o(x,{modelValue:e(a).image,"onUpdate:modelValue":s[6]||(s[6]=t=>e(a).image=t),variant:"outlined",label:"Avatar",disabled:e(_)||e(c),accept:".jpg, .jpeg, png","error-messages":e(n).$errors.find(t=>t.$property=="image")?e(n).$errors.find(t=>t.$property=="image").$message:""},null,8,["modelValue","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),j("div",le,[o(M,{color:"red",class:"mr-3",onClick:s[7]||(s[7]=t=>u.value=!1),disabled:e(_)||e(c)},{default:l(()=>[T("Cancel")]),_:1},8,["disabled"]),o(M,{color:"green",type:"submit",loading:e(c)},{default:l(()=>[T("Save")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},ne=se,re={class:"dashboard_banners_listing"},de={class:"heading d-flex justify-space-between align-center"},ie=j("h2",{class:"my-3"},"Team",-1),me={class:"py-3"},ue=["src"],ce={class:"d-flex align-center justify-center"},pe={__name:"Listing",props:["dashboardTeam","loading"],emits:["regetData"],setup(p,{emit:i}){const r=$(),g=v(!1),h=v(!1),A=v(null),a=v(!1),u=v(null),_=v([{title:"English Name",key:"nameEN"},{title:"Arabic Name",key:"nameAR"},{title:"Job Title EN",key:"jobTitleEN"},{title:"Job Title AR",key:"jobTitleAR"},{title:"Email",key:"email"},{title:"Photo",key:"photo"},{title:"Actions",key:"actions"}]),c=N=>N?"green":"red",V=async()=>{a.value=!1,u.value.loading=!0,await r.doDeleteItem("teamMember",u.value.id)&&i("regetData"),u.value.loading=!1};return(N,n)=>{const w=m("v-btn"),R=m("v-col"),s=m("v-row"),E=m("v-chip"),f=m("v-icon"),b=m("v-tooltip"),k=K,x=m("v-container"),U=ne;return y(),J("div",re,[o(x,{fluid:""},{default:l(()=>[o(s,null,{default:l(()=>[o(R,{cols:"12"},{default:l(()=>[j("div",de,[ie,o(w,{onClick:n[0]||(n[0]=d=>g.value=!0),width:"150px",height:"45px",color:"blue"},{default:l(()=>[T("Add Member")]),_:1})])]),_:1})]),_:1}),p.dashboardTeam?(y(),P(s,{key:0,class:"px-4"},{default:l(()=>[o(R,{cols:"12",class:"section_container dashboard_table"},{default:l(()=>[o(e(te),{headers:e(_),items:p.dashboardTeam.content,loading:p.loading,search:""},{"item.photo":l(({item:d})=>[j("div",me,[j("img",{width:"100",height:"70",style:{"border-radius":"10px"},src:d.selectable.photo?`data:image/jpg;base64,${d.selectable.photo}`:"",alt:"Test Image"},null,8,ue)])]),"item.latest":l(({item:d})=>[o(E,{color:c(d.selectable.latest)},{default:l(()=>[T(F(d.selectable.latest?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.promoted":l(({item:d})=>[o(E,{color:c(d.selectable.promoted)},{default:l(()=>[T(F(d.selectable.promoted?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.actions":l(({item:d})=>[j("div",ce,[o(w,{elevation:"0",onClick:M=>(A.value=d,h.value=!0)},{default:l(()=>[o(f,{color:"blue"},{default:l(()=>[T("mdi-square-edit-outline")]),_:1}),o(b,{activator:"parent",location:"bottom center"},{default:l(()=>[T("Update")]),_:1})]),_:2},1032,["onClick"]),o(w,{elevation:"0",color:"transparent",loading:d.selectable.loading,ripple:!1},{default:l(()=>[o(f,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:M=>(u.value=d.selectable,a.value=!0)},{default:l(()=>[T("mdi-delete")]),_:2},1032,["onClick"]),o(b,{activator:"parent",location:"bottom center"},{default:l(()=>[T("Delete")]),_:1})]),_:2},1032,["loading"])])]),_:1},8,["headers","items","loading"]),e(a)?(y(),P(k,{key:0,openPopup:e(a),onClosePopup:n[1]||(n[1]=d=>a.value=!1),onConfirmDelete:V},null,8,["openPopup"])):L("",!0)]),_:1})]),_:1})):L("",!0)]),_:1}),e(h)?(y(),P(U,{key:0,openPopup:e(h),onClosePopup:n[2]||(n[2]=d=>(h.value=!1,A.value=null)),toUpdate:e(A),onRegetData:n[3]||(n[3]=d=>i("regetData"))},null,8,["openPopup","toUpdate"])):L("",!0),e(g)?(y(),P(U,{key:1,openPopup:e(g),onClosePopup:n[4]||(n[4]=d=>g.value=!1),onRegetData:n[5]||(n[5]=d=>i("regetData"))},null,8,["openPopup"])):L("",!0)])}}},be=pe,ve={class:"dashboard_tests_page"},$e={__name:"Teams",setup(p){const i=O(),{dashboardTeam:r}=q(i),g=v(!0),h=async()=>{g.value=!0,await i.doGetDashboardTeam(),g.value=!1};return I(()=>{h()}),(A,a)=>{const u=be;return y(),J("div",ve,[o(u,{dashboardTeam:e(r),loading:e(g),onRegetData:h},null,8,["dashboardTeam","loading"])])}}};export{$e as default};
