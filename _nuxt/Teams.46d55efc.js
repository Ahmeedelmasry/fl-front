import{_ as K}from"./DeletePopup.ea62822f.js";import{D as Q,E as M,G as $,H as S,s as q,k as b,z as W,l as I,r as m,o as y,c as F,b as o,w as s,d as A,t as B,q as X,j as e,h as x,g as C,a as P,n as Z}from"./entry.8c88b42c.js";import{d as ee}from"./branches.951653fe.js";import{r as D,m as k,e as ae,u as G}from"./index.a1c7dcf5.js";import{V as te}from"./VDataTable.7c3107fa.js";const O=Q("dashboardTeamStore",{state:()=>({dashboardTeam:[]}),actions:{async doGetDashboardTeam(){this.dashboardTeam=[],await M.get(`${$().apiURL}/FutureLab/teamMember?lang=${S().lang[0]}`).then(c=>{this.dashboardTeam=c.data})},async doAddDashboardTeam(c){let i;return await M({data:c,method:"POST",url:`${$().apiURL}/FutureLab/teamMember?lang=${S().lang[0]}`,headers:{"Content-Type":"multipart/form-data"}}).then(r=>{i=!0,this.dashboardTeam=r.data,$().callResponse(!0,r.data.message,1)}).catch(r=>{i=!1,$().callResponse(!0,r.response.data.message,2)}),i},async doUpdateDashboardTeam(c){let i;return await M({data:c,method:"PATCH",url:`${$().apiURL}/FutureLab/teamMember?lang=${S().lang[0]}`,headers:{"Content-Type":"multipart/form-data"}}).then(r=>{i=!0,this.dashboardTeam=r.data,$().callResponse(!0,r.data.message,1)}).catch(r=>{$().callResponse(!0,r.response.data.message,2),i=!1}),i}}}),oe={class:"update_banner"},le={class:"actions text-center"},se={__name:"UpdateMember",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(c,{emit:i}){const r=c,_=O(),h=ee(),{dashboardBranches:N}=q(h),a=b({nameEN:"",nameAR:"",jobTitleEN:"",jobTitleAR:"",email:"",branch:""}),u=b(!1),v=b(!1),p=b(!1),V=b({nameEN:{required:D,minLength:k(3)},nameAR:{required:D,minLength:k(3)},jobTitleEN:{required:D,minLength:k(3)},jobTitleAR:{required:D,minLength:k(3)},email:{required:D,email:ae},branch:{required:D},image:{required:D,minLength:k(1)}}),R=b(null);W(()=>u.value,E=>{E||setTimeout(()=>{i("closePopup")},200)});let n=G(V,a);const L=async()=>{if(r.toUpdate&&(V.value.image={},n=G(V,a)),await n.value.$validate()){if(p.value=!0,r.toUpdate){const l=new FormData;if(l.append("stringDto",JSON.stringify({id:r.toUpdate.selectable.id,nameEN:a.value.nameEN,nameAR:a.value.nameAR,jobTitleEN:a.value.jobTitleEN,jobTitleAR:a.value.jobTitleAR,email:a.value.email,branch:{id:a.value.branch},isActive:!0})),a.value.image&&a.value.image.length)l.append("photo",a.value.image[0]);else{const g=atob(R.value),f=new ArrayBuffer(g.length),w=new Uint8Array(f);for(let T=0;T<g.length;T++)w[T]=g.charCodeAt(T);const j=new Blob([f],{type:"application/octet-stream"}),d=new File([j],"filename.ext",{type:"application/octet-stream"});l.append("photo",d)}await _.doUpdateDashboardTeam(l)&&(i("regetData"),u.value=!1)}else{const l=new FormData;l.append("stringDto",JSON.stringify({nameEN:a.value.nameEN,nameAR:a.value.nameAR,jobTitleEN:a.value.jobTitleEN,jobTitleAR:a.value.jobTitleAR,email:a.value.email,branch:{id:a.value.branch},isActive:!0})),l.append("photo",a.value.image[0]),await _.doAddDashboardTeam(l)&&(i("regetData"),u.value=!1)}p.value=!1}};return I(async()=>{v.value=!0,u.value=r.openPopup,await h.doGetDashboardBranches(),r.toUpdate&&(a.value.nameEN=r.toUpdate.selectable.nameEN,a.value.nameAR=r.toUpdate.selectable.nameAR,a.value.jobTitleEN=r.toUpdate.selectable.jobTitleEN,a.value.jobTitleAR=r.toUpdate.selectable.jobTitleAR,a.value.email=r.toUpdate.selectable.email,a.value.branch=r.toUpdate.selectable.branch.id,R.value=r.toUpdate.selectable.photo),v.value=!1}),(E,l)=>{const U=m("v-card-title"),g=m("v-text-field"),f=m("v-col"),w=m("v-select"),j=m("v-file-input"),d=m("v-row"),T=m("v-container"),J=m("v-btn"),z=m("v-form"),H=m("v-card"),Y=m("v-dialog");return y(),F("div",oe,[o(Y,{modelValue:e(u),"onUpdate:modelValue":l[8]||(l[8]=t=>Z(u)?u.value=t:null),width:"700",persistent:""},{default:s(()=>[o(H,null,{default:s(()=>[o(U,{class:"mb-5 text-center bg-grey-lighten-3"},{default:s(()=>[A(B(c.toUpdate?"Update Member":"Add Member"),1)]),_:1}),o(z,{class:"pa-5",onSubmit:X(L,["prevent"])},{default:s(()=>[o(T,null,{default:s(()=>[o(d,null,{default:s(()=>[o(f,{cols:"12",sm:"6"},{default:s(()=>[o(g,{label:"English Name",disabled:e(v)||e(p),variant:"outlined",modelValue:e(a).nameEN,"onUpdate:modelValue":l[0]||(l[0]=t=>e(a).nameEN=t),"error-messages":e(n).$errors.find(t=>t.$property=="nameEN")?e(n).$errors.find(t=>t.$property=="nameEN").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(f,{cols:"12",sm:"6"},{default:s(()=>[o(g,{label:"Arabic Name",disabled:e(v)||e(p),variant:"outlined",modelValue:e(a).nameAR,"onUpdate:modelValue":l[1]||(l[1]=t=>e(a).nameAR=t),"error-messages":e(n).$errors.find(t=>t.$property=="nameAR")?e(n).$errors.find(t=>t.$property=="nameAR").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(f,{cols:"12",sm:"6"},{default:s(()=>[o(g,{label:"English Job Title",disabled:e(v)||e(p),variant:"outlined",modelValue:e(a).jobTitleEN,"onUpdate:modelValue":l[2]||(l[2]=t=>e(a).jobTitleEN=t),"error-messages":e(n).$errors.find(t=>t.$property=="jobTitleEN")?e(n).$errors.find(t=>t.$property=="jobTitleEN").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(f,{cols:"12",sm:"6"},{default:s(()=>[o(g,{label:"Arabic Job Title",disabled:e(v)||e(p),variant:"outlined",modelValue:e(a).jobTitleAR,"onUpdate:modelValue":l[3]||(l[3]=t=>e(a).jobTitleAR=t),"error-messages":e(n).$errors.find(t=>t.$property=="jobTitleAR")?e(n).$errors.find(t=>t.$property=="jobTitleAR").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(f,{cols:"12",sm:"6"},{default:s(()=>[o(g,{label:"Email Address",disabled:e(v)||e(p),variant:"outlined",modelValue:e(a).email,"onUpdate:modelValue":l[4]||(l[4]=t=>e(a).email=t),"error-messages":e(n).$errors.find(t=>t.$property=="email")?e(n).$errors.find(t=>t.$property=="email").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(f,{cols:"12",sm:"6"},{default:s(()=>[e(N).content?(y(),x(w,{key:0,items:e(N).content,"item-title":"nameEN",variant:"outlined","item-value":"id",disabled:e(v)||e(p),label:"Select Branch",modelValue:e(a).branch,"onUpdate:modelValue":l[5]||(l[5]=t=>e(a).branch=t),"error-messages":e(n).$errors.find(t=>t.$property=="branch")?e(n).$errors.find(t=>t.$property=="branch").$message:""},null,8,["items","disabled","modelValue","error-messages"])):C("",!0)]),_:1}),o(f,{cols:"12"},{default:s(()=>[o(j,{modelValue:e(a).image,"onUpdate:modelValue":l[6]||(l[6]=t=>e(a).image=t),variant:"outlined",label:"Avatar",disabled:e(v)||e(p),accept:".jpg, .jpeg, png","error-messages":e(n).$errors.find(t=>t.$property=="image")?e(n).$errors.find(t=>t.$property=="image").$message:""},null,8,["modelValue","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),P("div",le,[o(J,{color:"red",class:"mr-3",onClick:l[7]||(l[7]=t=>u.value=!1),disabled:e(v)||e(p)},{default:s(()=>[A("Cancel")]),_:1},8,["disabled"]),o(J,{color:"green",type:"submit",loading:e(p)},{default:s(()=>[A("Save")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},ne=se,re={class:"dashboard_banners_listing"},de={class:"heading d-flex justify-space-between align-center"},ie=P("h2",{class:"my-3"},"Team",-1),me={class:"py-3"},ue=["src"],pe={__name:"Listing",props:["dashboardTeam","loading"],emits:["regetData"],setup(c,{emit:i}){const r=$(),_=b(!1),h=b(!1),N=b(null),a=b(!1),u=b(null),v=b([{title:"English Name",key:"nameEN"},{title:"Arabic Name",key:"nameAR"},{title:"Job Title EN",key:"jobTitleEN"},{title:"Job Title AR",key:"jobTitleAR"},{title:"Email",key:"email"},{title:"Photo",key:"photo"},{title:"Actions",key:"actions"}]),p=R=>R?"green":"red",V=async()=>{a.value=!1,u.value.loading=!0,await r.doDeleteItem("teamMember",u.value.id)&&i("regetData"),u.value.loading=!1};return(R,n)=>{const L=m("v-btn"),E=m("v-col"),l=m("v-row"),U=m("v-chip"),g=m("v-icon"),f=K,w=m("v-container"),j=ne;return y(),F("div",re,[o(w,{fluid:""},{default:s(()=>[o(l,null,{default:s(()=>[o(E,{cols:"12"},{default:s(()=>[P("div",de,[ie,o(L,{onClick:n[0]||(n[0]=d=>_.value=!0),width:"150px",height:"45px",color:"blue"},{default:s(()=>[A("Add Member")]),_:1})])]),_:1})]),_:1}),c.dashboardTeam?(y(),x(l,{key:0,class:"px-4"},{default:s(()=>[o(E,{cols:"12",class:"section_container dashboard_table"},{default:s(()=>[o(e(te),{headers:e(v),items:c.dashboardTeam.content,loading:c.loading,search:""},{"item.photo":s(({item:d})=>[P("div",me,[P("img",{width:"100",height:"70",style:{"border-radius":"10px"},src:d.selectable.photo?`data:image/jpg;base64,${d.selectable.photo}`:"",alt:"Test Image"},null,8,ue)])]),"item.latest":s(({item:d})=>[o(U,{color:p(d.selectable.latest)},{default:s(()=>[A(B(d.selectable.latest?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.promoted":s(({item:d})=>[o(U,{color:p(d.selectable.promoted)},{default:s(()=>[A(B(d.selectable.promoted?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.actions":s(({item:d})=>[o(g,{color:"blue",style:{cursor:"pointer"},onClick:T=>(N.value=d,h.value=!0)},{default:s(()=>[A("mdi-square-edit-outline")]),_:2},1032,["onClick"]),o(L,{elevation:"0",color:"transparent",loading:d.selectable.loading,ripple:!1},{default:s(()=>[o(g,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:T=>(u.value=d.selectable,a.value=!0)},{default:s(()=>[A("mdi-delete")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])]),_:1},8,["headers","items","loading"]),e(a)?(y(),x(f,{key:0,openPopup:e(a),onClosePopup:n[1]||(n[1]=d=>a.value=!1),onConfirmDelete:V},null,8,["openPopup"])):C("",!0)]),_:1})]),_:1})):C("",!0)]),_:1}),e(h)?(y(),x(j,{key:0,openPopup:e(h),onClosePopup:n[2]||(n[2]=d=>(h.value=!1,N.value=null)),toUpdate:e(N),onRegetData:n[3]||(n[3]=d=>i("regetData"))},null,8,["openPopup","toUpdate"])):C("",!0),e(_)?(y(),x(j,{key:1,openPopup:e(_),onClosePopup:n[4]||(n[4]=d=>_.value=!1),onRegetData:n[5]||(n[5]=d=>i("regetData"))},null,8,["openPopup"])):C("",!0)])}}},ce=pe,be={class:"dashboard_tests_page"},Te={__name:"Teams",setup(c){const i=O(),{dashboardTeam:r}=q(i),_=b(!0),h=async()=>{_.value=!0,await i.doGetDashboardTeam(),_.value=!1};return I(()=>{h()}),(N,a)=>{const u=ce;return y(),F("div",be,[o(u,{dashboardTeam:e(r),loading:e(_),onRegetData:h},null,8,["dashboardTeam","loading"])])}}};export{Te as default};
