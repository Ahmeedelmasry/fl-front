import{_ as O}from"./DeletePopup.ea62822f.js";import{D as z,E as C,G as h,H as L,k as v,z as H,l as F,r as p,o as R,c as S,b as a,w as l,d as V,t as K,q as Q,j as e,a as J,n as W,h as P,g as k,s as X}from"./entry.8c88b42c.js";import{r as $,m as A,u as B}from"./index.a1c7dcf5.js";import{V as Y}from"./VDataTable.7c3107fa.js";const j=z("dashboardTestemonialstore",{state:()=>({dashboardTestemonials:[]}),actions:{async doGetDashboardTestemonials(){this.dashboardTestemonials=[],await C.get(`${h().apiURL}/FutureLab/testiMonial?lang=${L().lang[0]}`).then(b=>{this.dashboardTestemonials=b.data})},async doAddDashboardTestemonials(b){let r;return await C({data:b,method:"POST",url:`${h().apiURL}/FutureLab/testiMonial?lang=${L().lang[0]}`}).then(n=>{r=!0,this.dashboardTestemonials=n.data,h().callResponse(!0,n.data.message,1)}).catch(n=>{r=!1,h().callResponse(!0,n.response.data.message,2)}),r},async doUpdateDashboardTestemonials(b){let r;return await C({data:b,method:"PATCH",url:`${h().apiURL}/FutureLab/testiMonial?lang=${L().lang[0]}`}).then(n=>{r=!0,this.dashboardTestemonials=n.data,h().callResponse(!0,n.data.message,1)}).catch(n=>{h().callResponse(!0,n.response.data.message,2),r=!1}),r}}}),Z={class:"update_banner"},ee={class:"actions text-center"},te={__name:"UpdateTestimonials",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(b,{emit:r}){const n=b,f=j(),t=v({personNameEN:"",personNameAR:"",personJobTitleEN:"",personJobTitleAR:"",commentEN:"",commentAR:"",image:[]}),g=v(!1),u=v(!1),i=v(!1),w=v({personNameEN:{required:$,minLength:A(3)},personNameAR:{required:$,minLength:A(3)},personJobTitleEN:{required:$,minLength:A(3)},personJobTitleAR:{required:$,minLength:A(3)},commentEN:{required:$,minLength:A(3)},commentAR:{required:$,minLength:A(3)},image:{required:$,minLength:A(1)}}),x=v(null);H(()=>g.value,y=>{y||setTimeout(()=>{r("closePopup")},200)});let d=B(w,t);const c=async()=>{if(n.toUpdate&&(w.value.image={},d=B(w,t)),await d.value.$validate()){if(i.value=!0,n.toUpdate){const s=new FormData;if(s.append("stringDto",JSON.stringify({id:n.toUpdate.selectable.id,personNameEN:t.value.personNameEN,personNameAR:t.value.personNameAR,personJobTitleEN:t.value.personJobTitleEN,personJobTitleAR:t.value.personJobTitleAR,commentEN:t.value.commentEN,commentAR:t.value.commentAR})),t.value.image&&t.value.image.length)s.append("photo",t.value.image[0]);else{const N=atob(x.value),_=new ArrayBuffer(N.length),D=new Uint8Array(_);for(let T=0;T<N.length;T++)D[T]=N.charCodeAt(T);const U=new Blob([_],{type:"application/octet-stream"}),m=new File([U],"filename.ext",{type:"application/octet-stream"});s.append("photo",m)}await f.doUpdateDashboardTestemonials(s)&&(r("regetData"),g.value=!1)}else{const s=new FormData;s.append("stringDto",JSON.stringify({personNameEN:t.value.personNameEN,personNameAR:t.value.personNameAR,personJobTitleEN:t.value.personJobTitleEN,personJobTitleAR:t.value.personJobTitleAR,commentEN:t.value.commentEN,commentAR:t.value.commentAR})),s.append("photo",t.value.image[0]),await f.doAddDashboardTestemonials(s)&&(r("regetData"),g.value=!1)}i.value=!1}};return F(async()=>{g.value=n.openPopup,n.toUpdate&&(t.value.personNameEN=n.toUpdate.selectable.personNameEN,t.value.personNameAR=n.toUpdate.selectable.personNameAR,t.value.personJobTitleEN=n.toUpdate.selectable.personJobTitleEN,t.value.personJobTitleAR=n.toUpdate.selectable.personJobTitleAR,t.value.commentEN=n.toUpdate.selectable.commentEN,t.value.commentAR=n.toUpdate.selectable.commentAR,x.value=n.toUpdate.selectable.personPhoto)}),(y,s)=>{const E=p("v-card-title"),N=p("v-text-field"),_=p("v-col"),D=p("v-textarea"),U=p("v-file-input"),m=p("v-row"),T=p("v-container"),M=p("v-btn"),I=p("v-form"),G=p("v-card"),q=p("v-dialog");return R(),S("div",Z,[a(q,{modelValue:e(g),"onUpdate:modelValue":s[8]||(s[8]=o=>W(g)?g.value=o:null),width:"700",persistent:""},{default:l(()=>[a(G,null,{default:l(()=>[a(E,{class:"mb-5 text-center bg-grey-lighten-3"},{default:l(()=>[V(K(b.toUpdate?"Update Testimonial":"Add Testimonial"),1)]),_:1}),a(I,{class:"pa-5",onSubmit:Q(c,["prevent"])},{default:l(()=>[a(T,null,{default:l(()=>[a(m,null,{default:l(()=>[a(_,{cols:"12",sm:"6"},{default:l(()=>[a(N,{label:"English Name",disabled:e(u)||e(i),variant:"outlined",modelValue:e(t).personNameEN,"onUpdate:modelValue":s[0]||(s[0]=o=>e(t).personNameEN=o),"error-messages":e(d).$errors.find(o=>o.$property=="personNameEN")?e(d).$errors.find(o=>o.$property=="personNameEN").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),a(_,{cols:"12",sm:"6"},{default:l(()=>[a(N,{label:"Arabic Name",disabled:e(u)||e(i),variant:"outlined",modelValue:e(t).personNameAR,"onUpdate:modelValue":s[1]||(s[1]=o=>e(t).personNameAR=o),"error-messages":e(d).$errors.find(o=>o.$property=="personNameAR")?e(d).$errors.find(o=>o.$property=="personNameAR").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),a(_,{cols:"12",sm:"6"},{default:l(()=>[a(N,{label:"English Title",disabled:e(u)||e(i),variant:"outlined",modelValue:e(t).personJobTitleEN,"onUpdate:modelValue":s[2]||(s[2]=o=>e(t).personJobTitleEN=o),"error-messages":e(d).$errors.find(o=>o.$property=="personJobTitleEN")?e(d).$errors.find(o=>o.$property=="personJobTitleEN").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),a(_,{cols:"12",sm:"6"},{default:l(()=>[a(N,{label:"Arabic Title",disabled:e(u)||e(i),variant:"outlined",modelValue:e(t).personJobTitleAR,"onUpdate:modelValue":s[3]||(s[3]=o=>e(t).personJobTitleAR=o),"error-messages":e(d).$errors.find(o=>o.$property=="personJobTitleAR")?e(d).$errors.find(o=>o.$property=="personJobTitleAR").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),a(_,{cols:"12",sm:"6"},{default:l(()=>[a(D,{label:"English Comment",disabled:e(u)||e(i),variant:"outlined",modelValue:e(t).commentEN,"onUpdate:modelValue":s[4]||(s[4]=o=>e(t).commentEN=o),"error-messages":e(d).$errors.find(o=>o.$property=="commentEN")?e(d).$errors.find(o=>o.$property=="commentEN").$message:"",rows:"3"},null,8,["disabled","modelValue","error-messages"])]),_:1}),a(_,{cols:"12",sm:"6"},{default:l(()=>[a(D,{label:"Arabic Comment",disabled:e(u)||e(i),variant:"outlined",modelValue:e(t).commentAR,"onUpdate:modelValue":s[5]||(s[5]=o=>e(t).commentAR=o),"error-messages":e(d).$errors.find(o=>o.$property=="commentAR")?e(d).$errors.find(o=>o.$property=="commentAR").$message:"",rows:"3"},null,8,["disabled","modelValue","error-messages"])]),_:1}),a(_,{cols:"12"},{default:l(()=>[a(U,{modelValue:e(t).image,"onUpdate:modelValue":s[6]||(s[6]=o=>e(t).image=o),variant:"outlined",label:"Client Image",disabled:e(u)||e(i),accept:".jpg, .jpeg, png","error-messages":e(d).$errors.find(o=>o.$property=="image")?e(d).$errors.find(o=>o.$property=="image").$message:""},null,8,["modelValue","disabled","error-messages"])]),_:1})]),_:1})]),_:1}),J("div",ee,[a(M,{color:"red",class:"mr-3",onClick:s[7]||(s[7]=o=>g.value=!1),disabled:e(u)||e(i)},{default:l(()=>[V("Cancel")]),_:1},8,["disabled"]),a(M,{color:"green",type:"submit",loading:e(i)},{default:l(()=>[V("Save")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},oe=te,ae={class:"dashboard_banners_listing"},se={class:"heading d-flex justify-space-between align-center"},ne=J("h2",{class:"my-3"},"Testimonials",-1),le={class:"py-3"},re=["src"],ie={__name:"Listing",props:["dashboardTestemonials","loading"],emits:["regetData"],setup(b,{emit:r}){const n=h(),f=v(!1),t=v(!1),g=v(null),u=v(!1),i=v(null),w=v([{title:"English Name",key:"personNameEN"},{title:"Arabic Name",key:"personNameAR"},{title:"English Title",key:"personJobTitleEN"},{title:"Arabic Title",key:"personJobTitleAR"},{title:"Image",key:"personPhoto"},{title:"Actions",key:"actions"}]),x=async()=>{u.value=!1,i.value.loading=!0,await n.doDeleteItem("testiMonial",i.value.id)&&r("regetData"),i.value.loading=!1};return(d,c)=>{const y=p("v-btn"),s=p("v-col"),E=p("v-row"),N=p("v-icon"),_=O,D=p("v-container"),U=oe;return R(),S("div",ae,[a(D,{fluid:""},{default:l(()=>[a(E,null,{default:l(()=>[a(s,{cols:"12"},{default:l(()=>[J("div",se,[ne,a(y,{onClick:c[0]||(c[0]=m=>f.value=!0),width:"170px",height:"45px",color:"blue"},{default:l(()=>[V("Add Testimonial")]),_:1})])]),_:1})]),_:1}),b.dashboardTestemonials?(R(),P(E,{key:0,class:"px-4"},{default:l(()=>[a(s,{cols:"12",class:"section_container dashboard_table"},{default:l(()=>[a(e(Y),{headers:e(w),items:b.dashboardTestemonials.content,loading:b.loading,search:""},{"item.personPhoto":l(({item:m})=>[J("div",le,[J("img",{width:"100",height:"70",style:{"border-radius":"10px"},src:m.selectable.personPhoto?`data:image/jpg;base64,${m.selectable.personPhoto}`:"",alt:"Test Image"},null,8,re)])]),"item.actions":l(({item:m})=>[a(N,{color:"blue",style:{cursor:"pointer"},onClick:T=>(g.value=m,t.value=!0)},{default:l(()=>[V("mdi-square-edit-outline")]),_:2},1032,["onClick"]),a(y,{elevation:"0",color:"transparent",loading:m.selectable.loading,ripple:!1},{default:l(()=>[a(N,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:T=>(i.value=m.selectable,u.value=!0)},{default:l(()=>[V("mdi-delete")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])]),_:1},8,["headers","items","loading"]),e(u)?(R(),P(_,{key:0,openPopup:e(u),onClosePopup:c[1]||(c[1]=m=>u.value=!1),onConfirmDelete:x},null,8,["openPopup"])):k("",!0)]),_:1})]),_:1})):k("",!0)]),_:1}),e(t)?(R(),P(U,{key:0,openPopup:e(t),onClosePopup:c[2]||(c[2]=m=>(t.value=!1,g.value=null)),toUpdate:e(g),onRegetData:c[3]||(c[3]=m=>r("regetData"))},null,8,["openPopup","toUpdate"])):k("",!0),e(f)?(R(),P(U,{key:1,openPopup:e(f),onClosePopup:c[4]||(c[4]=m=>f.value=!1),onRegetData:c[5]||(c[5]=m=>r("regetData"))},null,8,["openPopup"])):k("",!0)])}}},de=ie,me={class:"dashboard_tests_page"},ge={__name:"Testimonials",setup(b){const r=j(),{dashboardTestemonials:n}=X(r),f=v(!0),t=async()=>{f.value=!0,await r.doGetDashboardTestemonials(),f.value=!1};return F(()=>{t()}),(g,u)=>{const i=de;return R(),S("div",me,[a(i,{dashboardTestemonials:e(n),loading:e(f),onRegetData:t},null,8,["dashboardTestemonials","loading"])])}}};export{ge as default};
