import{s as M,k as f,z as Q,l as q,r,o as k,c as F,b as o,w as a,d as g,t as B,q as W,j as e,a as u,n as X,G as Z,h as L,g as S}from"./entry.08c37509.js";import{d as z}from"./tests.bc82165a.js";import{d as ee}from"./categories.e862bb22.js";import{r as x,m as j,n as G,b as O,u as Y}from"./index.4590c98c.js";import{_ as te}from"./DeletePopup.f158edf7.js";import{V as oe}from"./VDataTable.cbb22240.js";const ae={class:"update_banner"},se=u("div",null,[g("Set as "),u("strong",null,"Latest")],-1),le=u("div",null,[u("strong",{class:"text-success"},"Yes")],-1),ne=u("div",null,[u("strong",{class:"text-red"},"No")],-1),re=u("div",null,[g("Set as "),u("strong",null,"Promoted")],-1),de=u("div",null,[u("strong",{class:"text-success"},"Yes")],-1),ie=u("div",null,[u("strong",{class:"text-red"},"No")],-1),ce={class:"actions text-center"},ue={__name:"UpdateTest",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(V,{emit:y}){const d=V,U=z(),$=ee(),{dashboardCategories:T}=M($),t=f({nameEN:"",nameAR:"",price:"",category:"",image:[],isLatest:!1,isPromoted:!1}),_=f(!1),i=f(!1),p=f(!1),P=f({nameEN:{required:x,minLength:j(3)},nameAR:{required:x,minLength:j(3)},price:{required:x,numeric:G,between:O(1,1e5)},discount:{required:x,numeric:G,between:O(0,99)},category:{required:x},image:{required:x,minLength:j(1)}}),E=f(null);Q(()=>_.value,c=>{c||setTimeout(()=>{y("closePopup")},200)});let m=Y(P,t);const D=async()=>{if(d.toUpdate&&(P.value.image={},m=Y(P,t)),await m.value.$validate()){if(p.value=!0,d.toUpdate){const l=new FormData;if(l.append("stringDto",JSON.stringify({id:d.toUpdate.selectable.id,nameEN:t.value.nameEN.toUpperCase(),nameAR:t.value.nameAR,price:t.value.price,category:{id:t.value.category},isActive:!0,isLatest:t.value.isLatest,isPromoted:t.value.isPromoted,discount:t.value.discount})),t.value.image&&t.value.image.length)l.append("photo",t.value.image[0]);else{const b=atob(E.value),v=new ArrayBuffer(b.length),N=new Uint8Array(v);for(let h=0;h<b.length;h++)N[h]=b.charCodeAt(h);const C=new Blob([v],{type:"application/octet-stream"}),w=new File([C],"filename.ext",{type:"application/octet-stream"});l.append("photo",w)}await U.doUpdateDashboardTests(l)&&(y("regetData"),_.value=!1)}else{const l=new FormData;l.append("stringDto",JSON.stringify({nameEN:t.value.nameEN.toUpperCase(),nameAR:t.value.nameAR,price:t.value.price,category:{id:t.value.category},isActive:!0,isLatest:t.value.isLatest,isPromoted:t.value.isPromoted,discount:t.value.discount})),l.append("photo",t.value.image[0]),await U.doAddDashboardTests(l)&&(y("regetData"),_.value=!1)}p.value=!1}};return q(async()=>{i.value=!0,_.value=d.openPopup,await $.doGetDashboardCategories(),d.toUpdate&&(t.value.nameEN=d.toUpdate.selectable.nameEN,t.value.nameAR=d.toUpdate.selectable.nameAR,t.value.price=d.toUpdate.selectable.price,t.value.category=d.toUpdate.selectable.category.id,t.value.isLatest=d.toUpdate.selectable.latest,t.value.isPromoted=d.toUpdate.selectable.promoted,t.value.discount=d.toUpdate.selectable.discount,E.value=d.toUpdate.selectable.photo),i.value=!1}),(c,l)=>{const A=r("v-card-title"),b=r("v-text-field"),v=r("v-col"),N=r("v-select"),C=r("v-file-input"),w=r("v-radio"),h=r("v-radio-group"),I=r("v-row"),n=r("v-container"),R=r("v-btn"),J=r("v-form"),H=r("v-card"),K=r("v-dialog");return k(),F("div",ae,[o(K,{modelValue:e(_),"onUpdate:modelValue":l[9]||(l[9]=s=>X(_)?_.value=s:null),width:"700",persistent:""},{default:a(()=>[o(H,null,{default:a(()=>[o(A,{class:"mb-5 text-center bg-grey-lighten-3"},{default:a(()=>[g(B(V.toUpdate?"Update Test":"Add Test"),1)]),_:1}),o(J,{class:"pa-5",onSubmit:W(D,["prevent"])},{default:a(()=>[o(n,null,{default:a(()=>[o(I,null,{default:a(()=>[o(v,{cols:"12",sm:"6"},{default:a(()=>[o(b,{label:"English Test Name",disabled:e(i)||e(p),variant:"outlined",modelValue:e(t).nameEN,"onUpdate:modelValue":l[0]||(l[0]=s=>e(t).nameEN=s),"error-messages":e(m).$errors.find(s=>s.$property=="nameEN")?e(m).$errors.find(s=>s.$property=="nameEN").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:a(()=>[o(b,{label:"Arabic Test Name",disabled:e(i)||e(p),variant:"outlined",modelValue:e(t).nameAR,"onUpdate:modelValue":l[1]||(l[1]=s=>e(t).nameAR=s),"error-messages":e(m).$errors.find(s=>s.$property=="nameAR")?e(m).$errors.find(s=>s.$property=="nameAR").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:a(()=>[o(b,{label:"Test Price",disabled:e(i)||e(p),variant:"outlined",modelValue:e(t).price,"onUpdate:modelValue":l[2]||(l[2]=s=>e(t).price=s),"error-messages":e(m).$errors.find(s=>s.$property=="price")?e(m).$errors.find(s=>s.$property=="price").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:a(()=>[o(b,{label:"Test Discount",disabled:e(i)||e(p),variant:"outlined",modelValue:e(t).discount,"onUpdate:modelValue":l[3]||(l[3]=s=>e(t).discount=s),"error-messages":e(m).$errors.find(s=>s.$property=="discount")?e(m).$errors.find(s=>s.$property=="discount").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:a(()=>[o(N,{items:e(T).content,"item-title":"nameEN",variant:"outlined","item-value":"id",disabled:e(i)||e(p),label:"Select Category",modelValue:e(t).category,"onUpdate:modelValue":l[4]||(l[4]=s=>e(t).category=s),"error-messages":e(m).$errors.find(s=>s.$property=="category")?e(m).$errors.find(s=>s.$property=="category").$message:""},null,8,["items","disabled","modelValue","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:a(()=>[o(C,{modelValue:e(t).image,"onUpdate:modelValue":l[5]||(l[5]=s=>e(t).image=s),variant:"outlined",label:"Test Image",disabled:e(i)||e(p),accept:".jpg, .jpeg, png","error-messages":e(m).$errors.find(s=>s.$property=="image")?e(m).$errors.find(s=>s.$property=="image").$message:""},null,8,["modelValue","disabled","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:a(()=>[o(h,{modelValue:e(t).isLatest,"onUpdate:modelValue":l[6]||(l[6]=s=>e(t).isLatest=s)},{label:a(()=>[se]),default:a(()=>[o(w,{value:!0,disabled:e(i)||e(p)},{label:a(()=>[le]),_:1},8,["disabled"]),o(w,{value:!1,disabled:e(i)||e(p)},{label:a(()=>[ne]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:a(()=>[o(h,{modelValue:e(t).isPromoted,"onUpdate:modelValue":l[7]||(l[7]=s=>e(t).isPromoted=s)},{label:a(()=>[re]),default:a(()=>[o(w,{value:!0,disabled:e(i)||e(p)},{label:a(()=>[de]),_:1},8,["disabled"]),o(w,{value:!1,disabled:e(i)||e(p)},{label:a(()=>[ie]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),u("div",ce,[o(R,{color:"red",class:"mr-3",onClick:l[8]||(l[8]=s=>_.value=!1),disabled:e(i)||e(p)},{default:a(()=>[g("Cancel")]),_:1},8,["disabled"]),o(R,{color:"green",type:"submit",loading:e(p)},{default:a(()=>[g("Save")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},pe=ue,me={class:"dashboard_banners_listing"},_e={class:"heading d-flex justify-space-between align-center"},ve=u("h2",{class:"my-3"},"Tests",-1),ge={class:"py-3"},fe=["src"],be={class:"d-flex flex-column justify-center align-center"},ye={__name:"Listing",props:["dashboardTests","loading"],emits:["regetData"],setup(V,{emit:y}){const d=Z(),{LOCAL_HOST:U}=M(d),$=f(!1),T=f(!1),t=f(!1),_=f(null),i=f(null),p=f([{title:"English Name",key:"nameEN"},{title:"Arabic Name",key:"nameAR"},{title:"Price",key:"price"},{title:"Discount",key:"discount"},{title:"Category",key:"category.nameEN"},{title:"Photo",key:"photo"},{title:"Latest",key:"latest"},{title:"Promoted",key:"promoted"},{title:"Actions",key:"actions"}]),P=D=>D?"green":"red",E=async()=>{t.value=!1,i.value.loading=!0,await d.doDeleteItem("test",i.value.id)&&y("regetData"),i.value.loading=!1},m=D=>{const c=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(`${U.value}/en/TestsPage`)}&title=${encodeURIComponent(D.nameEN)}&description=${encodeURIComponent(D.price)}`;window.open(c,"_blank","width=600,height=400")};return(D,c)=>{const l=r("v-btn"),A=r("v-col"),b=r("v-row"),v=r("v-chip"),N=r("v-icon"),C=r("v-tooltip"),w=r("v-container"),h=pe,I=te;return k(),F("div",me,[o(w,{fluid:""},{default:a(()=>[o(b,null,{default:a(()=>[o(A,{cols:"12"},{default:a(()=>[u("div",_e,[ve,o(l,{onClick:c[0]||(c[0]=n=>$.value=!0),width:"150px",height:"45px",color:"blue"},{default:a(()=>[g("Add Test")]),_:1})])]),_:1})]),_:1}),V.dashboardTests?(k(),L(b,{key:0,class:"px-4"},{default:a(()=>[o(A,{cols:"12",class:"section_container dashboard_table"},{default:a(()=>[o(e(oe),{headers:e(p),items:V.dashboardTests.content,loading:V.loading,search:""},{"item.photo":a(({item:n})=>[u("div",ge,[u("img",{width:"100",height:"70",style:{"border-radius":"10px"},src:n.selectable.photo?`data:image/jpg;base64,${n.selectable.photo}`:"",alt:"Test Image"},null,8,fe)])]),"item.latest":a(({item:n})=>[o(v,{color:P(n.selectable.latest)},{default:a(()=>[g(B(n.selectable.latest?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.promoted":a(({item:n})=>[o(v,{color:P(n.selectable.promoted)},{default:a(()=>[g(B(n.selectable.promoted?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.actions":a(({item:n})=>[u("div",be,[o(l,{elevation:"0",color:"transparent",loading:n.selectable.loading,onClick:R=>(_.value=n,T.value=!0),ripple:!1},{default:a(()=>[o(N,{color:"blue"},{default:a(()=>[g("mdi-square-edit-outline")]),_:1}),o(C,{activator:"parent",location:"bottom center"},{default:a(()=>[g("Update")]),_:1})]),_:2},1032,["loading","onClick"]),o(l,{elevation:"0",color:"transparent",ripple:!1},{default:a(()=>[o(N,{color:"green",style:{cursor:"pointer"},onClick:R=>m(n.selectable),size:"23",id:`menu_activator_${n.selectable.id}`},{default:a(()=>[g("mdi-share-variant-outline")]),_:2},1032,["onClick","id"]),o(C,{activator:"parent",location:"bottom center"},{default:a(()=>[g("Share")]),_:1})]),_:2},1024),o(l,{elevation:"0",color:"transparent",loading:n.selectable.loading,ripple:!1},{default:a(()=>[o(N,{color:"red",style:{cursor:"pointer"},size:"23",onClick:R=>(i.value=n.selectable,t.value=!0)},{default:a(()=>[g("mdi-delete")]),_:2},1032,["onClick"]),o(C,{activator:"parent",location:"bottom center"},{default:a(()=>[g("Delete")]),_:1})]),_:2},1032,["loading"])])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1})):S("",!0)]),_:1}),e(T)?(k(),L(h,{key:0,openPopup:e(T),onClosePopup:c[1]||(c[1]=n=>(T.value=!1,_.value=null)),toUpdate:e(_),onRegetData:c[2]||(c[2]=n=>y("regetData"))},null,8,["openPopup","toUpdate"])):S("",!0),e($)?(k(),L(h,{key:1,openPopup:e($),onClosePopup:c[3]||(c[3]=n=>$.value=!1),onRegetData:c[4]||(c[4]=n=>y("regetData"))},null,8,["openPopup"])):S("",!0),e(t)?(k(),L(I,{key:2,openPopup:e(t),onClosePopup:c[5]||(c[5]=n=>t.value=!1),onConfirmDelete:E},null,8,["openPopup"])):S("",!0)])}}},$e=ye,he={class:"dashboard_tests_page"},Ce={__name:"Tests",setup(V){const y=z(),{dashboardTests:d}=M(y),U=f(!0),$=async()=>{U.value=!0,await y.doGetDashboardTests(),U.value=!1};return q(()=>{$()}),(T,t)=>{const _=$e;return k(),F("div",he,[o(_,{dashboardTests:e(d),loading:e(U),onRegetData:$},null,8,["dashboardTests","loading"])])}}};export{Ce as default};
