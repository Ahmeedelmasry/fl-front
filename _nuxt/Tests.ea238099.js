import{s as Y,k as _,z as Q,l as q,r as d,o as V,c as B,b as o,w as s,d as $,t as S,q as W,j as e,a as c,n as X,G as Z,h as E,g as R}from"./entry.8c88b42c.js";import{d as F}from"./tests.14a191c6.js";import{d as ee}from"./categories.e9d8b0b4.js";import{r as A,m as L,n as j,b as G,u as I}from"./index.a1c7dcf5.js";import{_ as te}from"./DeletePopup.ea62822f.js";import{V as ae}from"./VDataTable.7c3107fa.js";const oe={class:"update_banner"},se=c("div",null,[$("Set as "),c("strong",null,"Latest")],-1),le=c("div",null,[c("strong",{class:"text-success"},"Yes")],-1),ne=c("div",null,[c("strong",{class:"text-red"},"No")],-1),re=c("div",null,[$("Set as "),c("strong",null,"Promoted")],-1),de=c("div",null,[c("strong",{class:"text-success"},"Yes")],-1),ie=c("div",null,[c("strong",{class:"text-red"},"No")],-1),ue={class:"actions text-center"},ce={__name:"UpdateTest",props:["openPopup","toUpdate"],emits:["closePopup","regetData"],setup(U,{emit:b}){const i=U,g=F(),y=ee(),{dashboardCategories:D}=Y(y),t=_({nameEN:"",nameAR:"",price:"",category:"",image:[],isLatest:!1,isPromoted:!1}),p=_(!1),m=_(!1),u=_(!1),k=_({nameEN:{required:A,minLength:L(3)},nameAR:{required:A,minLength:L(3)},price:{required:A,numeric:j,between:G(1,1e5)},discount:{required:A,numeric:j,between:G(0,99)},category:{required:A},image:{required:A,minLength:L(1)}}),N=_(null);Q(()=>p.value,T=>{T||setTimeout(()=>{b("closePopup")},200)});let n=I(k,t);const C=async()=>{if(i.toUpdate&&(k.value.image={},n=I(k,t)),await n.value.$validate()){if(u.value=!0,i.toUpdate){const l=new FormData;if(l.append("stringDto",JSON.stringify({id:i.toUpdate.selectable.id,nameEN:t.value.nameEN.toUpperCase(),nameAR:t.value.nameAR,price:t.value.price,category:{id:t.value.category},isActive:!0,isLatest:t.value.isLatest,isPromoted:t.value.isPromoted,discount:t.value.discount})),t.value.image&&t.value.image.length)l.append("photo",t.value.image[0]);else{const f=atob(N.value),v=new ArrayBuffer(f.length),P=new Uint8Array(v);for(let h=0;h<f.length;h++)P[h]=f.charCodeAt(h);const x=new Blob([v],{type:"application/octet-stream"}),r=new File([x],"filename.ext",{type:"application/octet-stream"});l.append("photo",r)}await g.doUpdateDashboardTests(l)&&(b("regetData"),p.value=!1)}else{const l=new FormData;l.append("stringDto",JSON.stringify({nameEN:t.value.nameEN.toUpperCase(),nameAR:t.value.nameAR,price:t.value.price,category:{id:t.value.category},isActive:!0,isLatest:t.value.isLatest,isPromoted:t.value.isPromoted,discount:t.value.discount})),l.append("photo",t.value.image[0]),await g.doAddDashboardTests(l)&&(b("regetData"),p.value=!1)}u.value=!1}};return q(async()=>{m.value=!0,p.value=i.openPopup,await y.doGetDashboardCategories(),i.toUpdate&&(t.value.nameEN=i.toUpdate.selectable.nameEN,t.value.nameAR=i.toUpdate.selectable.nameAR,t.value.price=i.toUpdate.selectable.price,t.value.category=i.toUpdate.selectable.category.id,t.value.isLatest=i.toUpdate.selectable.latest,t.value.isPromoted=i.toUpdate.selectable.promoted,t.value.discount=i.toUpdate.selectable.discount,N.value=i.toUpdate.selectable.photo),m.value=!1}),(T,l)=>{const w=d("v-card-title"),f=d("v-text-field"),v=d("v-col"),P=d("v-select"),x=d("v-file-input"),r=d("v-radio"),h=d("v-radio-group"),z=d("v-row"),J=d("v-container"),M=d("v-btn"),O=d("v-form"),H=d("v-card"),K=d("v-dialog");return V(),B("div",oe,[o(K,{modelValue:e(p),"onUpdate:modelValue":l[9]||(l[9]=a=>X(p)?p.value=a:null),width:"700",persistent:""},{default:s(()=>[o(H,null,{default:s(()=>[o(w,{class:"mb-5 text-center bg-grey-lighten-3"},{default:s(()=>[$(S(U.toUpdate?"Update Test":"Add Test"),1)]),_:1}),o(O,{class:"pa-5",onSubmit:W(C,["prevent"])},{default:s(()=>[o(J,null,{default:s(()=>[o(z,null,{default:s(()=>[o(v,{cols:"12",sm:"6"},{default:s(()=>[o(f,{label:"English Test Name",disabled:e(m)||e(u),variant:"outlined",modelValue:e(t).nameEN,"onUpdate:modelValue":l[0]||(l[0]=a=>e(t).nameEN=a),"error-messages":e(n).$errors.find(a=>a.$property=="nameEN")?e(n).$errors.find(a=>a.$property=="nameEN").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:s(()=>[o(f,{label:"Arabic Test Name",disabled:e(m)||e(u),variant:"outlined",modelValue:e(t).nameAR,"onUpdate:modelValue":l[1]||(l[1]=a=>e(t).nameAR=a),"error-messages":e(n).$errors.find(a=>a.$property=="nameAR")?e(n).$errors.find(a=>a.$property=="nameAR").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:s(()=>[o(f,{label:"Test Price",disabled:e(m)||e(u),variant:"outlined",modelValue:e(t).price,"onUpdate:modelValue":l[2]||(l[2]=a=>e(t).price=a),"error-messages":e(n).$errors.find(a=>a.$property=="price")?e(n).$errors.find(a=>a.$property=="price").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:s(()=>[o(f,{label:"Test Discount",disabled:e(m)||e(u),variant:"outlined",modelValue:e(t).discount,"onUpdate:modelValue":l[3]||(l[3]=a=>e(t).discount=a),"error-messages":e(n).$errors.find(a=>a.$property=="discount")?e(n).$errors.find(a=>a.$property=="discount").$message:""},null,8,["disabled","modelValue","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:s(()=>[o(P,{items:e(D).content,"item-title":"nameEN",variant:"outlined","item-value":"id",disabled:e(m)||e(u),label:"Select Category",modelValue:e(t).category,"onUpdate:modelValue":l[4]||(l[4]=a=>e(t).category=a),"error-messages":e(n).$errors.find(a=>a.$property=="category")?e(n).$errors.find(a=>a.$property=="category").$message:""},null,8,["items","disabled","modelValue","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:s(()=>[o(x,{modelValue:e(t).image,"onUpdate:modelValue":l[5]||(l[5]=a=>e(t).image=a),variant:"outlined",label:"Test Image",disabled:e(m)||e(u),accept:".jpg, .jpeg, png","error-messages":e(n).$errors.find(a=>a.$property=="image")?e(n).$errors.find(a=>a.$property=="image").$message:""},null,8,["modelValue","disabled","error-messages"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:s(()=>[o(h,{modelValue:e(t).isLatest,"onUpdate:modelValue":l[6]||(l[6]=a=>e(t).isLatest=a)},{label:s(()=>[se]),default:s(()=>[o(r,{value:!0,disabled:e(m)||e(u)},{label:s(()=>[le]),_:1},8,["disabled"]),o(r,{value:!1,disabled:e(m)||e(u)},{label:s(()=>[ne]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),o(v,{cols:"12",sm:"6"},{default:s(()=>[o(h,{modelValue:e(t).isPromoted,"onUpdate:modelValue":l[7]||(l[7]=a=>e(t).isPromoted=a)},{label:s(()=>[re]),default:s(()=>[o(r,{value:!0,disabled:e(m)||e(u)},{label:s(()=>[de]),_:1},8,["disabled"]),o(r,{value:!1,disabled:e(m)||e(u)},{label:s(()=>[ie]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),c("div",ue,[o(M,{color:"red",class:"mr-3",onClick:l[8]||(l[8]=a=>p.value=!1),disabled:e(m)||e(u)},{default:s(()=>[$("Cancel")]),_:1},8,["disabled"]),o(M,{color:"green",type:"submit",loading:e(u)},{default:s(()=>[$("Save")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])])}}},pe=ce,me={class:"dashboard_banners_listing"},ve={class:"heading d-flex justify-space-between align-center"},_e=c("h2",{class:"my-3"},"Tests",-1),ge={class:"py-3"},fe=["src"],be={__name:"Listing",props:["dashboardTests","loading"],emits:["regetData"],setup(U,{emit:b}){const i=Z(),g=_(!1),y=_(!1),D=_(!1),t=_(null),p=_(null),m=_([{title:"English Name",key:"nameEN"},{title:"Arabic Name",key:"nameAR"},{title:"Price",key:"price"},{title:"Discount",key:"discount"},{title:"Category",key:"category.nameEN"},{title:"Photo",key:"photo"},{title:"Latest",key:"latest"},{title:"Promoted",key:"promoted"},{title:"Actions",key:"actions"}]),u=N=>N?"green":"red",k=async()=>{D.value=!1,p.value.loading=!0,await i.doDeleteItem("test",p.value.id)&&b("regetData"),p.value.loading=!1};return(N,n)=>{const C=d("v-btn"),T=d("v-col"),l=d("v-row"),w=d("v-chip"),f=d("v-icon"),v=d("v-container"),P=pe,x=te;return V(),B("div",me,[o(v,{fluid:""},{default:s(()=>[o(l,null,{default:s(()=>[o(T,{cols:"12"},{default:s(()=>[c("div",ve,[_e,o(C,{onClick:n[0]||(n[0]=r=>g.value=!0),width:"150px",height:"45px",color:"blue"},{default:s(()=>[$("Add Test")]),_:1})])]),_:1})]),_:1}),U.dashboardTests?(V(),E(l,{key:0,class:"px-4"},{default:s(()=>[o(T,{cols:"12",class:"section_container dashboard_table"},{default:s(()=>[o(e(ae),{headers:e(m),items:U.dashboardTests.content,loading:U.loading,search:""},{"item.photo":s(({item:r})=>[c("div",ge,[c("img",{width:"100",height:"70",style:{"border-radius":"10px"},src:r.selectable.photo?`data:image/jpg;base64,${r.selectable.photo}`:"",alt:"Test Image"},null,8,fe)])]),"item.latest":s(({item:r})=>[o(w,{color:u(r.selectable.latest)},{default:s(()=>[$(S(r.selectable.latest?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.promoted":s(({item:r})=>[o(w,{color:u(r.selectable.promoted)},{default:s(()=>[$(S(r.selectable.promoted?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.actions":s(({item:r})=>[o(f,{color:"blue",style:{cursor:"pointer"},onClick:h=>(t.value=r,y.value=!0)},{default:s(()=>[$("mdi-square-edit-outline")]),_:2},1032,["onClick"]),o(C,{elevation:"0",color:"transparent",loading:r.selectable.loading,ripple:!1},{default:s(()=>[o(f,{color:"red",style:{cursor:"pointer"},class:"ml-2",size:"23",onClick:h=>(p.value=r.selectable,D.value=!0)},{default:s(()=>[$("mdi-delete")]),_:2},1032,["onClick"])]),_:2},1032,["loading"])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1})):R("",!0)]),_:1}),e(y)?(V(),E(P,{key:0,openPopup:e(y),onClosePopup:n[1]||(n[1]=r=>(y.value=!1,t.value=null)),toUpdate:e(t),onRegetData:n[2]||(n[2]=r=>b("regetData"))},null,8,["openPopup","toUpdate"])):R("",!0),e(g)?(V(),E(P,{key:1,openPopup:e(g),onClosePopup:n[3]||(n[3]=r=>g.value=!1),onRegetData:n[4]||(n[4]=r=>b("regetData"))},null,8,["openPopup"])):R("",!0),e(D)?(V(),E(x,{key:2,openPopup:e(D),onClosePopup:n[5]||(n[5]=r=>D.value=!1),onConfirmDelete:k},null,8,["openPopup"])):R("",!0)])}}},ye=be,$e={class:"dashboard_tests_page"},we={__name:"Tests",setup(U){const b=F(),{dashboardTests:i}=Y(b),g=_(!0),y=async()=>{g.value=!0,await b.doGetDashboardTests(),g.value=!1};return q(()=>{y()}),(D,t)=>{const p=ye;return V(),B("div",$e,[o(p,{dashboardTests:e(i),loading:e(g),onRegetData:y},null,8,["dashboardTests","loading"])])}}};export{we as default};
